
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.kubestellar.io/release-0.20.0/en/Coding%20Milestones/PoC2023q1/kubestellar-syncer/">
      
      
        <link rel="prev" href="../coding-milestone-invite-q1/">
      
      
        <link rel="next" href="../example1/">
      
      <link rel="icon" href="../../../../favicons/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.0">
    
    
      
        <title>KubeStellar-Syncer - KubeStellar</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=SapceMono:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"SapceMono";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/kubestellar.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-SR5TD1CXY7"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-SR5TD1CXY7",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-SR5TD1CXY7",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  <meta name="google-site-verification" content="QZFIkG95fMxODWgQDK2OUn73HUIu9fZmuTer-ZA4UwI" />

  <!-- Determine title -->
  
  
    
  

  <!-- The image needs to have an absolute URL -->
  

  <!-- Open graph meta tags -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="KubeStellar - KubeStellar-Syncer" />
  <meta property="og:description" content="None" />
  <meta property="og:url" content="https://docs.kubestellar.io/release-0.20.0/en/Coding%20Milestones/PoC2023q1/kubestellar-syncer/" />
  <meta property="og:image" content="https://docs.kubestellar.io/release-0.20.0assets/images/illustrations/banner.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1080" />
  <meta property="og:image:height" content="568" />

  <!-- google-site-verification meta-tag -->
  <meta name="google-site-verification" content="-Rj8YMCn9uu5IwOFdC-WfAzXp4ZOMJtYKxU40ZgcJIU" />

<!-- Extra stylesheets -->
<!--  <link
    rel="stylesheet"
    href="../../../../assets/stylesheets/overrides.css"
  />-->

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#steps-to-try-the-syncer" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <!-- Extra stylesing -->
  <style>
      .md-announce a,
      .md-announce a:focus,
      .md-announce a:hover{color:currentColor}.md-announce
      strong{white-space:nowrap}.md-announce
  </style>

<!--   
  <a href="https://www.linkedin.com/feed/hashtag/?keywords=kubestellar">
  <p style="color: #D5EE1C">For updates follow <strong style="color: #D5EE1C">@kubestellar</strong> on
    <strong style="color: white">LinkedIn</strong>
  </p>
</a> 
-->

<a href="https://www.linkedin.com/feed/hashtag/?keywords=kubestellar">
  <p style="color: #D5EE1C">KubeStellar is now a <strong style="color: #D5EE1C">Cloud Native Computing Foundation (CNCF) Sanbox Project</strong>. Follow us <strong style="color: #D5EE1C">@kubestellar</strong> on
    <strong style="color: white">LinkedIn</strong>
  </p>
</a>


          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the stable release.
  <a href="../latest/../../../..">
    <strong>Click here to go to the stable release</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../" title="KubeStellar" class="md-header__button md-logo" aria-label="KubeStellar" data-md-component="logo">
      
  <img src="../../../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            KubeStellar
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              KubeStellar-Syncer
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kubestellar/kubestellar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../" class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../Getting-Started/user-quickstart-kind/" class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../Contribution%20guidelines/CONTRIBUTING/" class="md-tabs__link">
        Contributing
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../outline/" class="md-tabs__link md-tabs__link--active">
        Coding Milestones
      </a>
    </li>
  

  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../Community/_index/" class="md-tabs__link">
        Community
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://medium.com/@kubestellar/list/predefined:e785a0675051:READING_LIST" target="_blank" class="md-tabs__link">
      Blog
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../" title="KubeStellar" class="md-nav__button md-logo" aria-label="KubeStellar" data-md-component="logo">
      
  <img src="../../../../logo.png" alt="logo">

    </a>
    KubeStellar
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kubestellar/kubestellar" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../">Home</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../readme/" class="md-nav__link">
        Readme
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/user-quickstart-kind/" class="md-nav__link">
        Quickstart using Kind
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/user-quickstart-openshift/" class="md-nav__link">
        Quickstart using OpenShift
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/user-quickstart-kind/" class="md-nav__link">
        Quickstart using Kind
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/user-quickstart-openshift/" class="md-nav__link">
        Quickstart using OpenShift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/user-quickstart-test/" class="md-nav__link">
        Quickstart for testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/quickstart/" class="md-nav__link">
        Detailed QuickStart
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example1/" class="md-nav__link">
        Extended Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/user-guide/" class="md-nav__link">
        User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Getting-Started/infomercial/" class="md-nav__link">
        KubeStellar - The Infomercial
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/CONTRIBUTING/" class="md-nav__link">
        Guidelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/coc/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/LICENSE/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/governance/" class="md-nav__link">
        Governance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/onboarding/" class="md-nav__link">
        Onboarding
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          Security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/security/security/" class="md-nav__link">
        Policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/security/security_contacts/" class="md-nav__link">
        Contacts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
          Operations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/operations/code-management/" class="md-nav__link">
        Code Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/operations/packaging-and-versioning/" class="md-nav__link">
        Packaging and Versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/operations/release-management/" class="md-nav__link">
        Release Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/operations/document-management/" class="md-nav__link">
        Document Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Contribution%20guidelines/operations/testing-doc-prs/" class="md-nav__link">
        Testing Documentation PRs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Coding Milestones
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Coding Milestones
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
          PoC2023q1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          PoC2023q1
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../outline/" class="md-nav__link">
        Details
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../coding-milestone-invite-q1/" class="md-nav__link">
        Invitation to Contribute
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          KubeStellar-Syncer
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        KubeStellar-Syncer
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#steps-to-try-the-syncer" class="md-nav__link">
    Steps to try the Syncer
  </a>
  
    <nav class="md-nav" aria-label="Steps to try the Syncer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#your-kubeconfig-files" class="md-nav__link">
    Your kubeconfig files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-two-kind-clusters" class="md-nav__link">
    Create two kind clusters.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-kind-cluster-for-space-management" class="md-nav__link">
    Create Kind cluster for space management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-space-manager-controller" class="md-nav__link">
    The space-manager controller
  </a>
  
    <nav class="md-nav" aria-label="The space-manager controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-kubestellar" class="md-nav__link">
    Get KubeStellar
  </a>
  
    <nav class="md-nav" aria-label="Get KubeStellar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-pre-built-archive" class="md-nav__link">
    Use pre-built archive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-from-github" class="md-nav__link">
    Get from GitHub
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-binaries-of-kube-bind-and-dex" class="md-nav__link">
    Get binaries of kube-bind and dex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-kubestellar-platform-as-bare-processes" class="md-nav__link">
    Initialize the KubeStellar platform as bare processes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-kcp-and-kubestellar-as-a-workload-in-a-kubernetes-cluster" class="md-nav__link">
    Deploy kcp and KubeStellar as a workload in a Kubernetes cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-synctarget-and-location-objects-to-represent-the-florin-and-guilder-clusters" class="md-nav__link">
    Create SyncTarget and Location objects to represent the florin and guilder clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-mailbox-controller" class="md-nav__link">
    The mailbox controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-kubestellar-syncer-on-the-target-clusters" class="md-nav__link">
    Register KubeStellar-Syncer on the target clusters
  </a>
  
    <nav class="md-nav" aria-label="Register KubeStellar-Syncer on the target clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-the-target-cluster-of-guilder" class="md-nav__link">
    For the target cluster of guilder,
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-the-target-cluster-of-florin" class="md-nav__link">
    For the target cluster of florin,
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-the-environment" class="md-nav__link">
    Teardown the environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-bare-processes" class="md-nav__link">
    Teardown bare processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-kubernetes-workload" class="md-nav__link">
    Teardown Kubernetes workload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deep-dive" class="md-nav__link">
    Deep-dive
  </a>
  
    <nav class="md-nav" aria-label="Deep-dive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-details-about-the-registration-of-kubestellar-syncer-on-an-edge-cluster-and-a-workspace" class="md-nav__link">
    The details about the registration of KubeStellar-Syncer on an Edge cluster and a workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-kubestellar-syncer-gen-plugin-does" class="md-nav__link">
    What KubeStellar syncer-gen plugin does
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-workload-objects-from-kubestellar-to-edge-cluster" class="md-nav__link">
    Deploy workload objects from KubeStellar to Edge cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edgesyncconfig-will-be-replaced-to-syncerconfig" class="md-nav__link">
    EdgeSyncConfig (will be replaced to SyncerConfig)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syncerconfig" class="md-nav__link">
    SyncerConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downsyncing" class="md-nav__link">
    Downsyncing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renaturing-may-not-scope-in-poc2023q1-since-no-usage" class="md-nav__link">
    Renaturing (May not scope in PoC2023q1 since no usage)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-of-reported-state" class="md-nav__link">
    Return of reported state
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-upsyncing" class="md-nav__link">
    Resource Upsyncing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feasibility-study" class="md-nav__link">
    Feasibility study
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-kubestellar-syncer-image" class="md-nav__link">
    Build KubeStellar-Syncer image
  </a>
  
    <nav class="md-nav" aria-label="Build KubeStellar-Syncer image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-build-the-image-in-your-local" class="md-nav__link">
    How to build the image in your local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-build-the-image-with-multiple-architectures-and-push-it-to-docker-registry" class="md-nav__link">
    How to build the image with multiple architectures and push it to Docker registry
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teardown-the-environment_1" class="md-nav__link">
    Teardown the environment
  </a>
  
    <nav class="md-nav" aria-label="Teardown the environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teardown-bare-processes_1" class="md-nav__link">
    Teardown bare processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-kubernetes-workload_1" class="md-nav__link">
    Teardown Kubernetes workload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../example1/" class="md-nav__link">
        Extended Example
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_5" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_5" id="__nav_4_1_5_label" tabindex="0">
          KubeStellar Processes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_5">
          <span class="md-nav__icon md-icon"></span>
          KubeStellar Processes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../where-resolver/" class="md-nav__link">
        KubeStellar Where Resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mailbox-controller/" class="md-nav__link">
        KubeStellar Mailbox Controller
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../placement-translator/" class="md-nav__link">
        KubeStellar Placement Translator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../roadmap-uses/" class="md-nav__link">
        Use Cases Affecting the Roadmap for PoC2023q1
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_7" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_7" id="__nav_4_1_7_label" tabindex="0">
          Environments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_7">
          <span class="md-nav__icon md-icon"></span>
          Environments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/_index/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/cloud-env/" class="md-nav__link">
        Cloud Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environments/dev-env/" class="md-nav__link">
        Developer Environment
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_8" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_1_8" id="__nav_4_1_8_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_1_8">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        Commands
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          PoC2023q4
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          PoC2023q4
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../PoC2023q4/outline/" class="md-nav__link">
        Details
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Community
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Community
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Community/_index/" class="md-nav__link">
        Get Involved
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.kubestellar.io/main/Contribution%20guidelines/CONTRIBUTING/" class="md-nav__link">
        Contributor Guidelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
          Contact Us
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Contact Us
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://kubestellar.io/join_us" class="md-nav__link">
        Mailing List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://kubestellar.io/agenda" class="md-nav__link">
        Community Meeting Agenda (join mailing list first)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://kubestellar.io/slack" class="md-nav__link">
        Slack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://kubestellar.io/blog" class="md-nav__link">
        Medium Blog
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://kubestellar.io/tv" class="md-nav__link">
        YouTube Channel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://kubestellar.io/linkedin" class="md-nav__link">
        LinkedIn
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://www.reddit.com/r/kubestellar/" class="md-nav__link">
        Reddit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://drive.google.com/drive/u/1/folders/1p68MwkX0sYdTvtup0DcnAEsnXElobFLS" class="md-nav__link">
        Google Drive
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
          Partners
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Partners
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Community/partners/argocd/" class="md-nav__link">
        ArgoCD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Community/partners/turbonomic/" class="md-nav__link">
        Turbonomic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Community/partners/mvi/" class="md-nav__link">
        MVI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Community/partners/fluxcd/" class="md-nav__link">
        FluxCD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Community/partners/openziti/" class="md-nav__link">
        OpenZiti
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Community/partners/kyverno/" class="md-nav__link">
        Kyverno
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://medium.com/@kubestellar/list/predefined:e785a0675051:READING_LIST" target="_blank" class="md-nav__link">
        Blog
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#steps-to-try-the-syncer" class="md-nav__link">
    Steps to try the Syncer
  </a>
  
    <nav class="md-nav" aria-label="Steps to try the Syncer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#your-kubeconfig-files" class="md-nav__link">
    Your kubeconfig files
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-two-kind-clusters" class="md-nav__link">
    Create two kind clusters.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-kind-cluster-for-space-management" class="md-nav__link">
    Create Kind cluster for space management
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-space-manager-controller" class="md-nav__link">
    The space-manager controller
  </a>
  
    <nav class="md-nav" aria-label="The space-manager controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-kubestellar" class="md-nav__link">
    Get KubeStellar
  </a>
  
    <nav class="md-nav" aria-label="Get KubeStellar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-pre-built-archive" class="md-nav__link">
    Use pre-built archive
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-from-github" class="md-nav__link">
    Get from GitHub
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-binaries-of-kube-bind-and-dex" class="md-nav__link">
    Get binaries of kube-bind and dex
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-kubestellar-platform-as-bare-processes" class="md-nav__link">
    Initialize the KubeStellar platform as bare processes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-kcp-and-kubestellar-as-a-workload-in-a-kubernetes-cluster" class="md-nav__link">
    Deploy kcp and KubeStellar as a workload in a Kubernetes cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-synctarget-and-location-objects-to-represent-the-florin-and-guilder-clusters" class="md-nav__link">
    Create SyncTarget and Location objects to represent the florin and guilder clusters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-mailbox-controller" class="md-nav__link">
    The mailbox controller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-kubestellar-syncer-on-the-target-clusters" class="md-nav__link">
    Register KubeStellar-Syncer on the target clusters
  </a>
  
    <nav class="md-nav" aria-label="Register KubeStellar-Syncer on the target clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#for-the-target-cluster-of-guilder" class="md-nav__link">
    For the target cluster of guilder,
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#for-the-target-cluster-of-florin" class="md-nav__link">
    For the target cluster of florin,
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-the-environment" class="md-nav__link">
    Teardown the environment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-bare-processes" class="md-nav__link">
    Teardown bare processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-kubernetes-workload" class="md-nav__link">
    Teardown Kubernetes workload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deep-dive" class="md-nav__link">
    Deep-dive
  </a>
  
    <nav class="md-nav" aria-label="Deep-dive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-details-about-the-registration-of-kubestellar-syncer-on-an-edge-cluster-and-a-workspace" class="md-nav__link">
    The details about the registration of KubeStellar-Syncer on an Edge cluster and a workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-kubestellar-syncer-gen-plugin-does" class="md-nav__link">
    What KubeStellar syncer-gen plugin does
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-workload-objects-from-kubestellar-to-edge-cluster" class="md-nav__link">
    Deploy workload objects from KubeStellar to Edge cluster
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edgesyncconfig-will-be-replaced-to-syncerconfig" class="md-nav__link">
    EdgeSyncConfig (will be replaced to SyncerConfig)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#syncerconfig" class="md-nav__link">
    SyncerConfig
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#downsyncing" class="md-nav__link">
    Downsyncing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renaturing-may-not-scope-in-poc2023q1-since-no-usage" class="md-nav__link">
    Renaturing (May not scope in PoC2023q1 since no usage)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#return-of-reported-state" class="md-nav__link">
    Return of reported state
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resource-upsyncing" class="md-nav__link">
    Resource Upsyncing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feasibility-study" class="md-nav__link">
    Feasibility study
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-kubestellar-syncer-image" class="md-nav__link">
    Build KubeStellar-Syncer image
  </a>
  
    <nav class="md-nav" aria-label="Build KubeStellar-Syncer image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-build-the-image-in-your-local" class="md-nav__link">
    How to build the image in your local
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-build-the-image-with-multiple-architectures-and-push-it-to-docker-registry" class="md-nav__link">
    How to build the image with multiple architectures and push it to Docker registry
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teardown-the-environment_1" class="md-nav__link">
    Teardown the environment
  </a>
  
    <nav class="md-nav" aria-label="Teardown the environment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#teardown-bare-processes_1" class="md-nav__link">
    Teardown bare processes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown-kubernetes-workload_1" class="md-nav__link">
    Teardown Kubernetes workload
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/kubestellar/kubestellar/edit/main/docs/content/Coding Milestones/PoC2023q1/kubestellar-syncer.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/kubestellar/kubestellar/raw/main/docs/content/Coding Milestones/PoC2023q1/kubestellar-syncer.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>KubeStellar-Syncer</h1>

<p><a href="https://github.com/kubestellar/kubestellar/actions/workflows/docs-ecutable-syncer.yml"><img alt="docs-ecutable - kubestellar-syncer" src="https://github.com/kubestellar/kubestellar/actions/workflows/docs-ecutable-syncer.yml/badge.svg?branch=main" /></a>&nbsp;&nbsp;&nbsp;</p>
<!-- BEGIN INCLUDE ../../common-subs/required-packages.md '&lt;!--required-packages-start--&gt;' '&lt;!--required-packages-end--&gt;' -->

<div class="admonition tip">
<p class="admonition-title">Required Packages for running and using KubeStellar:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:7"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><input id="__tabbed_1_5" name="__tabbed_1" type="radio" /><input id="__tabbed_1_6" name="__tabbed_1" type="radio" /><input id="__tabbed_1_7" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">General</label><label for="__tabbed_1_2">Mac</label><label for="__tabbed_1_3">Ubuntu</label><label for="__tabbed_1_4">Debian</label><label for="__tabbed_1_5">Fedora/RHEL/CentOS</label><label for="__tabbed_1_6">Windows</label><label for="__tabbed_1_7">WSL with Ubuntu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>You will need the following tools to deploy and use KubeStellar. 
Select the tab for your environment for suggested commands to install them</p>
<ul>
<li>
<p><strong>curl</strong> (omitted from most OS-specific instructions)</p>
</li>
<li>
<p><a href="https://stedolan.github.io/jq/download/"><strong>jq</strong></a></p>
</li>
<li>
<p><a href="https://github.com/mikefarah/yq#install"><strong>yq</strong></a></p>
</li>
<li>
<p><a href="https://kubernetes.io/docs/tasks/tools/"><strong>kubectl</strong></a> (version range expected: 1.23-1.25)</p>
</li>
<li>
<p><a href="https://helm.sh/docs/intro/install/"><strong>helm</strong></a> (required when deploying as workload)</p>
</li>
</ul>
<p><strong>If you intend to build kubestellar from source</strong>  you will also need </p>
<ul>
<li>
<p><a href="https://go.dev/doc/install"><strong>go</strong></a> (Go version &gt;=1.19 required; 1.19 recommended) [<strong>go releases</strong>] (https://go.dev/dl)</p>
</li>
<li>
<p>for simplicity, here's a <a href="https://go.dev/dl"><strong>direct link to go releases</strong></a> Remember you need go v1.19 or greater; 1.19 recommended!</p>
</li>
</ul>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">jq - https://stedolan.github.io/jq/download/</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>brew install jq
</code></pre></div>
<div class="language-text highlight"><span class="filename">yq - https://github.com/mikefarah/yq#install</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>brew install yq
</code></pre></div>
<div class="language-text highlight"><span class="filename">kubectl - https://kubernetes.io/docs/tasks/tools/ (version range expected: 1.23-1.25)</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>brew install kubectl
</code></pre></div>
<div class="language-text highlight"><span class="filename">helm (required when deploying as workload) - https://helm.sh/docs/intro/install/</span><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>brew install helm
</code></pre></div>
<div class="language-text highlight"><span class="filename">go (only required if you build kubestellar from source)</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>
</code></pre></div></p>
<ol>
<li>
<p>Download the package from <a href="https://go.dev/dl#go1.19"><strong>https://go.dev/dl#go1.19</strong></a>  Be sure to get the correct one for your architecture</p>
</li>
<li>
<p>Open the package file you downloaded and follow the prompts to install Go.
   The package installs the Go distribution to /usr/local/go. The package should put the /usr/local/go/bin directory in your PATH environment variable. You may need to restart any open Terminal sessions for the change to take effect.</p>
</li>
<li>
<p>Verify that you've installed Go by opening a command prompt and typing the following command:
      <code>$ go version</code>
   Confirm that the command prints the desired installed version of Go. </p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">jq - https://stedolan.github.io/jq/download/</span><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo apt-get install jq
</code></pre></div>
<div class="language-text highlight"><span class="filename">yq - https://github.com/mikefarah/yq#install</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sudo snap install yq
</code></pre></div>
<div class="language-text highlight"><span class="filename">kubectl - https://kubernetes.io/docs/tasks/tools/ (version range expected: 1.23-1.25)</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/$(dpkg --print-architecture)/kubectl&quot; &amp;&amp; chmod +x kubectl &amp;&amp; sudo mv ./kubectl /usr/local/bin/kubectl
</code></pre></div>
<div class="language-text highlight"><span class="filename">helm (required when deploying as workload) - https://helm.sh/docs/intro/install/</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>curl https://baltocdn.com/helm/signing.asc | gpg --dearmor | sudo tee /usr/share/keyrings/helm.gpg &gt; /dev/null
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>sudo apt-get install apt-transport-https --yes
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/helm.gpg] https://baltocdn.com/helm/stable/debian/ all main&quot; | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>sudo apt-get update
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>sudo apt-get install helm
</code></pre></div>
<div class="language-text highlight"><span class="filename">go (only required if you build kubestellar from source)</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>
</code></pre></div></p>
<p>visit https://go.dev/doc/install for latest instructions</p>
<ol>
<li>
<p>Remove any previous Go installation by deleting the /usr/local/go folder (if it exists), then extract the archive you just downloaded into /usr/local, creating a fresh Go tree in /usr/local/go:</p>
<p><code>$ rm -rf /usr/local/go &amp;&amp; tar -C /usr/local -xzf go1.21.3.linux-amd64.tar.gz</code></p>
<p>(You may need to run the command as root or through sudo).</p>
<p><strong>Do not</strong> untar the archive into an existing /usr/local/go tree. This is known to produce broken Go installations.</p>
</li>
<li>
<p>Add /usr/local/go/bin to the PATH environment variable.
      You can do this by adding the following line to your $HOME/.profile or /etc/profile (for a system-wide installation):</p>
<p><code>export PATH=$PATH:/usr/local/go/bin</code></p>
<p><strong>Note:</strong> Changes made to a profile file may not apply until the next time you log into your computer. To apply the changes immediately, just run the shell commands directly or execute them from the profile using a command such as source $HOME/.profile.</p>
</li>
<li>
<p>Verify that you've installed Go by opening a command prompt and typing the following command:</p>
<p><code>$ go version</code></p>
</li>
<li>
<p>Confirm that the command prints the installed version of Go.</p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">jq - https://stedolan.github.io/jq/download/</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo apt-get install jq
</code></pre></div>
<div class="language-text highlight"><span class="filename">yq - https://github.com/mikefarah/yq#install</span><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>sudo apt-get install yq
</code></pre></div>
<div class="language-text highlight"><span class="filename">kubectl - https://kubernetes.io/docs/tasks/tools/ (version range expected: 1.23-1.25)</span><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/$(dpkg --print-architecture)/kubectl&quot; &amp;&amp; chmod +x kubectl &amp;&amp; sudo mv ./kubectl /usr/local/bin/kubectl
</code></pre></div>
<div class="language-text highlight"><span class="filename">helm (required when deploying as workload) - https://helm.sh/docs/intro/install/</span><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>curl https://baltocdn.com/helm/signing.asc | gpg --dearmor | sudo tee /usr/share/keyrings/helm.gpg &gt; /dev/null
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>sudo apt-get install apt-transport-https --yes
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/helm.gpg] https://baltocdn.com/helm/stable/debian/ all main&quot; | sudo tee /etc/apt/sources.list.d/helm-stable-debian.list
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>sudo apt-get update
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>sudo apt-get install helm
</code></pre></div>
<div class="language-text highlight"><span class="filename">go (only required if you build kubestellar from source)</span><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>
</code></pre></div></p>
<p>visit https://go.dev/doc/install for latest instructions</p>
<ol>
<li>
<p>Remove any previous Go installation by deleting the /usr/local/go folder (if it exists), then extract the archive you just downloaded into /usr/local, creating a fresh Go tree in /usr/local/go:</p>
<p><code>$ rm -rf /usr/local/go &amp;&amp; tar -C /usr/local -xzf go1.21.3.linux-amd64.tar.gz</code></p>
<p>(You may need to run the command as root or through sudo).</p>
<p><strong>Do not</strong> untar the archive into an existing /usr/local/go tree. This is known to produce broken Go installations.</p>
</li>
<li>
<p>Add /usr/local/go/bin to the PATH environment variable.
      You can do this by adding the following line to your $HOME/.profile or /etc/profile (for a system-wide installation):</p>
<p><code>export PATH=$PATH:/usr/local/go/bin</code></p>
<p><strong>Note:</strong> Changes made to a profile file may not apply until the next time you log into your computer. To apply the changes immediately, just run the shell commands directly or execute them from the profile using a command such as source $HOME/.profile.</p>
</li>
<li>
<p>Verify that you've installed Go by opening a command prompt and typing the following command:</p>
<p><code>$ go version</code></p>
</li>
<li>
<p>Confirm that the command prints the installed version of Go.</p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">jq - https://stedolan.github.io/jq/download/</span><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>yum -y install jq
</code></pre></div>
<div class="language-text highlight"><span class="filename">yq - https://github.com/mikefarah/yq#install</span><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a># easiest to install with snap
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>snap install yq
</code></pre></div>
<div class="language-text highlight"><span class="filename">kubectl - https://kubernetes.io/docs/tasks/tools/ (version range expected: 1.23-1.25)</span><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a># For AMD64 / x86_64
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>[ $(uname -m) = x86_64 ] &amp;&amp; curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot; &amp;&amp; chmod +x kubectl &amp;&amp; mv ./kubectl /usr/local/bin/kubectl
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a># for ARM64 / aarch64
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>[ $(uname -m) = aarch64 ] &amp;&amp; curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/arm64/kubectl&quot; &amp;&amp; chmod +x kubectl &amp;&amp; mv ./kubectl /usr/local/bin/kubectl
</code></pre></div>
<div class="language-text highlight"><span class="filename">helm (required when deploying as workload) - https://helm.sh/docs/intro/install/</span><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>dnf install helm
</code></pre></div>
<div class="language-text highlight"><span class="filename">go (only required if you build kubestellar from source)</span><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>
</code></pre></div></p>
<p>visit https://go.dev/doc/install for latest instructions</p>
<ol>
<li>
<p>Remove any previous Go installation by deleting the /usr/local/go folder (if it exists), then extract the archive you just downloaded into /usr/local, creating a fresh Go tree in /usr/local/go:</p>
<p><code>$ rm -rf /usr/local/go &amp;&amp; tar -C /usr/local -xzf go1.21.3.linux-amd64.tar.gz</code></p>
<p>(You may need to run the command as root or through sudo).</p>
<p><strong>Do not</strong> untar the archive into an existing /usr/local/go tree. This is known to produce broken Go installations.</p>
</li>
<li>
<p>Add /usr/local/go/bin to the PATH environment variable.
      You can do this by adding the following line to your $HOME/.profile or /etc/profile (for a system-wide installation):</p>
<p><code>export PATH=$PATH:/usr/local/go/bin</code></p>
<p><strong>Note:</strong> Changes made to a profile file may not apply until the next time you log into your computer. To apply the changes immediately, just run the shell commands directly or execute them from the profile using a command such as source $HOME/.profile.</p>
</li>
<li>
<p>Verify that you've installed Go by opening a command prompt and typing the following command:</p>
<p><code>$ go version</code></p>
</li>
<li>
<p>Confirm that the command prints the installed version of Go.</p>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">Chocolatey - https://chocolatey.org/install#individual</span><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://community.chocolatey.org/install.ps1&#39;))
</code></pre></div>
<div class="language-text highlight"><span class="filename">curl</span><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>choco install curl -y
</code></pre></div>
<div class="language-text highlight"><span class="filename">jq - https://stedolan.github.io/jq/download/</span><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>choco install jq -y
</code></pre></div>
<div class="language-text highlight"><span class="filename">yq - https://github.com/mikefarah/yq#install</span><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>choco install yq -y
</code></pre></div>
<div class="language-text highlight"><span class="filename">kubectl - https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/ (version range expected: 1.23-1.25)</span><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>curl.exe -LO &quot;https://dl.k8s.io/release/v1.27.2/bin/windows/amd64/kubectl.exe&quot;    
</code></pre></div>
<div class="language-text highlight"><span class="filename">helm (required when deploying as workload) - https://helm.sh/docs/intro/install/</span><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>choco install kubernetes-helm
</code></pre></div>
<div class="language-text highlight"><span class="filename">go (only required if you build kubestellar from source)</span><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>visit https://go.dev/doc/install for latest instructions
</code></pre></div></p>
<ol>
<li>
<p>Download the go 1.19 MSI package from <a href="https://go.dev/dl#go1.19"><strong>https://go.dev/dl#go1.19</strong></a>  Be sure to get the correct one for your architecture</p>
</li>
<li>
<p>Open the MSI file you downloaded and follow the prompts to install Go.</p>
<p>By default, the installer will install Go to Program Files or Program Files (x86). You can change the location as needed. After installing, you will need to close and reopen any open command prompts so that changes to the environment made by the installer are reflected at the command prompt. </p>
</li>
<li>
<p>Verify that you've installed Go:</p>
<ol>
<li>
<p>In Windows, click the Start menu.</p>
</li>
<li>
<p>In the menu's search box, type cmd, then press the Enter key.</p>
</li>
<li>
<p>In the Command Prompt window that appears, type the following command:
    <code>$ go version</code></p>
</li>
<li>
<p>Confirm that the command prints the installed version of Go.</p>
</li>
</ol>
</li>
</ol>
</div>
<div class="tabbed-block">
<p><h3>How to install pre-requisites for a Windows Subsystem for Linux (WSL) envronment using an Ubuntu 22.04.01 distribution</h3></p>
<p>(Tested on a Intel(R) Core(TM) i7-9850H CPU @ 2.60GHz 2.59 GHz with 32GB RAM, a 64-bit operating system, x64-based processor
Using Windows 11 Enterprise)</p>
<p><h6> 1. If you're using a VPN, turn it off</h6></p>
<p><h6> 2. Install Ubuntu into WSL</h6></p>
<p><h6> 2.0 If wsl is not yet installed, open a powershell administrator window and run the following</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>wsl --install
</code></pre></div>
<h6> 2.1 reboot your system</h6></p>
<p><h6> 2.2 In a Windows command terminal run the following to list all the linux distributions that are available online</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>wsl -l -o
</code></pre></div>
<h6> 2.3 Select a linux distribution and install it into WSL</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>wsl --install -d Ubuntu 22.04.01
</code></pre></div>
You will see something like:
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>Installing, this may take a few minutes...
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>Please create a default UNIX user account. The username does not need to match your Windows username.
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>For more information visit: https://aka.ms/wslusers
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>Enter new UNIX username:
</code></pre></div></p>
<p><h6> 2.4 Enter your new username and password at the prompts, and you will eventually see something like:</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>Welcome to Ubuntu 22.04.1 LTS (GNU/Linux 5.10.102.1-microsoft-standard-WSL2 x86_64)
</code></pre></div></p>
<p><h6> 2.5 Click on the Windows "Start" icon and type in the name of your distribution into the search box.
Your new linux distribution should appear as a local "App". You can pin it to the Windows task bar or to Start for your future convenience.</h6>
Start a VM using your distribution by clicking on the App.</p>
<p><h6> 3. Install pre-requisites into your new VM</h6>
<h6> 3.1 update and apply apt-get packages</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>sudo apt-get update
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>sudo apt-get upgrade
</code></pre></div></p>
<p><h6> 3.2 Install golang</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>wget https://golang.org/dl/go1.19.linux-amd64.tar.gz
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>sudo tar -zxvf go1.19.linux-amd64.tar.gz -C /usr/local
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>echo export GOROOT=/usr/local/go | sudo tee -a /etc/profile
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>echo export PATH=&quot;$PATH:/usr/local/go/bin&quot; | sudo tee -a /etc/profile
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>source /etc/profile
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>go version
</code></pre></div></p>
<p><h6> 3.3 Install ko (but don't do ko set action step)</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>go install github.com/google/ko@latest
</code></pre></div></p>
<p><h6> 3.4 Install gcc</h6>
Either run this:
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>sudo apt install build-essential
</code></pre></div>
or this:
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>sudo apt-get update
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>apt install gcc
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>gcc --version
</code></pre></div></p>
<p><h6> 3.5 Install make (if you installed build-essential this may already be installed)</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>apt install make
</code></pre></div></p>
<p><h6> 3.6 Install jq</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>DEBIAN_FRONTEND=noninteractive apt-get install -y jq
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>jq --version
</code></pre></div></p>
<p><h6> 3.7 install kubectl</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>curl -LO &quot;https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl&quot;
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>curl -LO &quot;https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256&quot;
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>echo &quot;$(cat kubectl.sha256)  kubectl&quot; | sha256sum --check
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a>sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
</code></pre></div>
<h6> 3.8 install helm (required when deploying as workload)</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>chmod 700 get_helm.sh
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>./get_helm.sh
</code></pre></div></p>
</div>
</div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Required Packages for the example usage:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:7"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><input id="__tabbed_2_4" name="__tabbed_2" type="radio" /><input id="__tabbed_2_5" name="__tabbed_2" type="radio" /><input id="__tabbed_2_6" name="__tabbed_2" type="radio" /><input id="__tabbed_2_7" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">General</label><label for="__tabbed_2_2">Mac</label><label for="__tabbed_2_3">Ubuntu</label><label for="__tabbed_2_4">Debian</label><label for="__tabbed_2_5">Fedora/RHEL/CentOS</label><label for="__tabbed_2_6">Windows</label><label for="__tabbed_2_7">WSL with Ubuntu</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>You will need the following tools for the example usage of KubeStellar in this quickstart example.
Select the tab for your environment for suggested commands to install them</p>
<ul>
<li>
<p><a href="https://docs.docker.com/engine/install/"><strong>docker</strong></a> or <a href="https://podman.io/"><strong>podman</strong></a>, to support <code>kind</code></p>
</li>
<li>
<p><a href="https://kind.sigs.k8s.io/docs/user/quick-start/"><strong>kind</strong></a></p>
</li>
</ul>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">docker - https://docs.docker.com/engine/install/</span><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>brew install docker
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>open -a Docker
</code></pre></div>
<div class="language-text highlight"><span class="filename">kind - https://kind.sigs.k8s.io/docs/user/quick-start/</span><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>brew install kind
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">docker - https://docs.docker.com/engine/install/</span><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>sudo mkdir -p /etc/apt/keyrings
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>sudo apt update
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>sudo apt-get install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin
</code></pre></div>
<div class="language-text highlight"><span class="filename">Enable rootless usage of Docker (requires relogin) - https://docs.docker.com/engine/security/rootless/</span><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>sudo apt-get install -y dbus-user-session # *** Relogin after this
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>sudo apt-get install -y uidmap
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>dockerd-rootless-setuptool.sh install
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>systemctl --user restart docker.service
</code></pre></div>
<div class="language-text highlight"><span class="filename">kind - https://kind.sigs.k8s.io/docs/user/quick-start/</span><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.20.0/kind-linux-$(dpkg --print-architecture) &amp;&amp; chmod +x ./kind &amp;&amp; sudo mv ./kind /usr/local/bin
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">docker - https://docs.docker.com/engine/install/</span><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a># Add Docker&#39;s official GPG key:
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>sudo apt-get update
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>sudo apt-get install ca-certificates curl gnupg
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>sudo install -m 0755 -d /etc/apt/keyrings
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>sudo chmod a+r /etc/apt/keyrings/docker.gpg
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a># Add the repository to Apt sources:
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>echo \
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>  &quot;deb [arch=&quot;$(dpkg --print-architecture)&quot; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian \
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>  &quot;$(. /etc/os-release &amp;&amp; echo &quot;$VERSION_CODENAME&quot;)&quot; stable&quot; | \
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>sudo apt-get update
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a># Install packages
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</code></pre></div>
<div class="language-text highlight"><span class="filename">Enable rootless usage of Docker (requires relogin) - https://docs.docker.com/engine/security/rootless/</span><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>sudo apt-get install -y dbus-user-session # *** Relogin after this
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>sudo apt-get install -y fuse-overlayfs
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>sudo apt-get install -y slirp4netns
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>dockerd-rootless-setuptool.sh install
</code></pre></div>
<div class="language-text highlight"><span class="filename">kind - https://kind.sigs.k8s.io/docs/user/quick-start/</span><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.14.0/kind-linux-$(dpkg --print-architecture) &amp;&amp; chmod +x ./kind &amp;&amp; sudo mv ./kind /usr/local/bin
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">docker - https://docs.docker.com/engine/install/</span><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>yum -y install epel-release &amp;&amp; yum -y install docker &amp;&amp; systemctl enable --now docker &amp;&amp; systemctl status docker
</code></pre></div>
Enable rootless usage of Docker by following the instructions at <a href="https://docs.docker.com/engine/security/rootless/">https://docs.docker.com/engine/security/rootless/</a>
<div class="language-text highlight"><span class="filename">kind - https://kind.sigs.k8s.io/docs/user/quick-start/</span><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a># For AMD64 / x86_64
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>[ $(uname -m) = x86_64 ] &amp;&amp; curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.14.0/kind-linux-amd64
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a># For ARM64
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>[ $(uname -m) = aarch64 ] &amp;&amp; curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.14.0/kind-linux-arm64 
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>chmod +x ./kind &amp;&amp; sudo mv ./kind /usr/local/bin/kind
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p><div class="language-text highlight"><span class="filename">docker - https://docs.docker.com/engine/install/</span><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>choco install docker -y
</code></pre></div>
<div class="language-text highlight"><span class="filename">kind - https://kind.sigs.k8s.io/docs/user/quick-start/</span><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>curl.exe -Lo kind-windows-amd64.exe https://kind.sigs.k8s.io/dl/v0.14.0/kind-windows-amd64
</code></pre></div></p>
</div>
<div class="tabbed-block">
<p><h3> How to install docker and kind into a Windows Subsystem for Linux (WSL) environment using an Ubuntu 22.04.01 distribution</h3></p>
<p><h6> 1.0 Start a VM terminal by clicking on the App you configured using the instructions in the General pre-requisites described above.</h6></p>
<p><h6> 2.0 Install docker</h6>
The installation instructions from docker are not sufficient to get docker working with WSL</p>
<p><h6> 2.1 Follow instructions here to install docker https://docs.docker.com/engine/install/ubuntu/</h6></p>
<p>Here some additional steps you will need to take:</p>
<p><h6> 2.2 Ensure that /etc/wsl.conf is configured so that systemd will run on booting.</h6>
If /etc/wsl.conf does not contain [boot] systemd=true, then edit /etc/wsl.com as follows:
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>sudo vi /etc/wsl.conf
</code></pre></div>
Insert
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>[boot]
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>systemd=true
</code></pre></div></p>
<p><h6> 2.3 Edit /etc/sudoers: it is strongly recommended to not add directives directly to /etc/sudoers, but instead to put them in files in /etc/sudoers.d which are auto-included. So make/modify a new file via</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>sudo vi /etc/sudoers.d/docker
</code></pre></div>
Insert
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a># Docker daemon specification
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>&lt;your user account&gt; ALL=(ALL) NOPASSWD: /usr/bin/dockerd
</code></pre></div></p>
<p><h6> 2.4 Add your user to the docker group</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>sudo usermod -aG docker $USER
</code></pre></div></p>
<p><h6> 2.5 If dockerd is already running, then stop it and restart it as follows (note: the new dockerd instance will be running in the foreground):</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>sudo systemctl stop docker
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>sudo dockerd &amp;
</code></pre></div></p>
<p><h6> 2.5.1 If you encounter an iptables issue, which is described here: https://github.com/microsoft/WSL/issues/6655 
The following commands will fix the issue:</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>sudo update-alternatives --set iptables /usr/sbin/iptables-legacy
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-legacy
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>sudo dockerd &amp; 
</code></pre></div></p>
<p><h6> 3. You will now need to open new terminals to access the VM since dockerd is running in the foreground of this terminal</h6></p>
<p><h6> 3.1 In your new terminal, install kind</h6>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>wget -nv https://github.com/kubernetes-sigs/kind/releases/download/v0.17.0/kind-linux-$(dpkg --print-architecture) -O kind 
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>sudo install -m 0755 kind /usr/local/bin/kind 
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>rm kind 
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>kind version
</code></pre></div></p>
</div>
</div>
</div>
</div>
<!-- END INCLUDE -->
<!-- BEGIN INCLUDE ../../common-subs/save-some-time.md '&lt;!--save-some-time-start--&gt;' '&lt;!--save-some-time-end--&gt;' -->

<div class="admonition tip">
<p class="admonition-title">This document is 'docs-ecutable' - you can 'run' this document, just like we do in our testing, on your local environment</p>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>git clone -b main https://github.com/kubestellar/kubestellar
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>cd kubestellar
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>make MANIFEST=&quot;&#39;docs/content/common-subs/pre-req.md&#39;,&#39;docs/content/Coding Milestones/PoC2023q1/kubestellar-syncer.md&#39;&quot; docs-ecutable
</code></pre></div>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a># done? remove everything
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>make MANIFEST=&quot;docs/content/common-subs/remove-all.md&quot; docs-ecutable
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a>cd ..
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>rm -rf kubestellar
</code></pre></div>
</div>
<!-- END INCLUDE -->

<p>KubeStellar-Syncer runs in the target cluster and sync kubernetes resource objects from the target cluster to a mailbox workspace and vice versa.</p>
<p><img alt="kubestellar-syncer drawio" src="../images/kubestellar-syncer-overview.png" /></p>
<h2 id="steps-to-try-the-syncer">Steps to try the Syncer<a class="headerlink" href="#steps-to-try-the-syncer" title="Permanent link">#</a></h2>
<p>The KubeStellar-Syncer can be exercised after setting up KubeStellar mailbox workspaces. Firstly we'll follow to similar steps in <a href="../example1">example1</a> until <code>The mailbox controller</code> in stage 2. </p>
<!-- BEGIN INCLUDE example1-subs/example1-pre-provider.md '&lt;!--example1-pre-provider-start--&gt;' '&lt;!--example1-pre-provider-end--&gt;' -->

<p><img alt="Boxes and arrows. Two kind clusters exist, named florin and guilder. The Inventory Management space contains two pairs of SyncTarget and Location objects. The Edge Service Provider space contains the PoC controllers; the mailbox controller reads the SyncTarget objects and creates two mailbox spaces." src="../Edge-PoC-2023q1-Scenario-1-stage-1.svg" title="Stage 1 Summary" /></p>
<p>Stage 1 creates the infrastructure and the edge service provider
workspace (ESPW) and lets that react to the inventory.  Then the KubeStellar syncers
are deployed, in the edge clusters and configured to work with the
corresponding mailbox spaces.  This stage has the following steps.</p>
<h3 id="your-kubeconfig-files">Your kubeconfig files<a class="headerlink" href="#your-kubeconfig-files" title="Permanent link">#</a></h3>
<p>This example (and others) involve user-managed kubeconfig files. These
examples organize those files into one subdirectory. Start by making
sure that directory exists without any contents left over from
previous runs.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nv">MY_KUBECONFIGS</span><span class="o">=</span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span>/my-kubeconfigs
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MY_KUBECONFIGS</span><span class="s2">&quot;</span>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$MY_KUBECONFIGS</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="create-two-kind-clusters">Create two kind clusters.<a class="headerlink" href="#create-two-kind-clusters" title="Permanent link">#</a></h3>
<p>This example uses two <a href="https://kind.sigs.k8s.io/">kind</a> clusters as
edge clusters.  We will call them "florin" and "guilder".</p>
<p>This example uses extremely simple workloads, which
use <code>hostPort</code> networking in Kubernetes.  To make those ports easily
reachable from your host, this example uses an explicit <code>kind</code>
configuration for each edge cluster.</p>
<p>For the florin cluster, which will get only one workload, create a
file named <code>florin-config.yaml</code> with the following contents.  In a
<code>kind</code> config file, <code>containerPort</code> is about the container that is
also a host (a Kubernetes node), while the <code>hostPort</code> is about the
host that hosts that container.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>florin-config.yaml<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="s">kind: Cluster</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="s">apiVersion: kind.x-k8s.io/v1alpha4</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="s">nodes:</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="s">- role: control-plane</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="s">  extraPortMappings:</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="s">  - containerPort: 8081</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="s">    hostPort: 8094</span>
<a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="s">EOF</span>
</code></pre></div>
<p>For the guilder cluster, which will get two workloads, create a file
named <code>guilder-config.yaml</code> with the following contents.  The workload
that uses hostPort 8081 goes in both clusters, while the workload that
uses hostPort 8082 goes only in the guilder cluster.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>guilder-config.yaml<span class="w"> </span><span class="s">&lt;&lt; EOF</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="s">kind: Cluster</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="s">apiVersion: kind.x-k8s.io/v1alpha4</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="s">nodes:</span>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="s">- role: control-plane</span>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="s">  extraPortMappings:</span>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="s">  - containerPort: 8081</span>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="s">    hostPort: 8096</span>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="s">  - containerPort: 8082</span>
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="s">    hostPort: 8097</span>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="s">EOF</span>
</code></pre></div>
<p>Finally, create the two clusters with the following two commands,
paying attention to <code>$KUBECONFIG</code> and, if that's empty,
<code>~/.kube/config</code>: <code>kind create</code> will inject/replace the relevant
"context" in your active kubeconfig.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>kind<span class="w"> </span>create<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>florin<span class="w"> </span>--config<span class="w"> </span>florin-config.yaml
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>kind<span class="w"> </span>create<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>guilder<span class="w"> </span>--config<span class="w"> </span>guilder-config.yaml
</code></pre></div>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE example1-subs/example1-space-manager.md '&lt;!--example1-space-manager-start--&gt;' '&lt;!--example1-space-manager-end--&gt;' -->

<h3 id="create-kind-cluster-for-space-management">Create Kind cluster for space management<a class="headerlink" href="#create-kind-cluster-for-space-management" title="Permanent link">#</a></h3>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a>kind<span class="w"> </span>create<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>sm-mgt<span class="w"> </span>--config<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="s">kind: Cluster</span>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="s">apiVersion: kind.x-k8s.io/v1alpha4</span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="s">nodes:</span>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="s">- role: control-plane</span>
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="s">  kubeadmConfigPatches:</span>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="s">  - |</span>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="s">    kind: InitConfiguration</span>
<a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a><span class="s">    nodeRegistration:</span>
<a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a><span class="s">      kubeletExtraArgs:</span>
<a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a><span class="s">        node-labels: &quot;ingress-ready=true&quot;</span>
<a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="s">  extraPortMappings:</span>
<a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a><span class="s">  - containerPort: 443</span>
<a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a><span class="s">    hostPort: 9443</span>
<a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a><span class="s">    protocol: TCP</span>
<a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a><span class="s">EOF</span>
<a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a>
<a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a>kubectl<span class="w"> </span>create<span class="w"> </span>-f<span class="w"> </span>https://raw.githubusercontent.com/kubestellar/kubestellar/main/example/kind-nginx-ingress-with-SSL-passthrough.yaml
<a id="__codelineno-67-19" name="__codelineno-67-19" href="#__codelineno-67-19"></a>sleep<span class="w"> </span><span class="m">20</span>
<a id="__codelineno-67-20" name="__codelineno-67-20" href="#__codelineno-67-20"></a>kubectl<span class="w"> </span><span class="nb">wait</span><span class="w"> </span>--namespace<span class="w"> </span>ingress-nginx<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-67-21" name="__codelineno-67-21" href="#__codelineno-67-21"></a><span class="w">  </span>--for<span class="o">=</span><span class="nv">condition</span><span class="o">=</span>ready<span class="w"> </span>pod<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-67-22" name="__codelineno-67-22" href="#__codelineno-67-22"></a><span class="w">  </span>--selector<span class="o">=</span>app.kubernetes.io/component<span class="o">=</span>controller<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-67-23" name="__codelineno-67-23" href="#__codelineno-67-23"></a><span class="w">  </span>--timeout<span class="o">=</span>360s
<a id="__codelineno-67-24" name="__codelineno-67-24" href="#__codelineno-67-24"></a>
<a id="__codelineno-67-25" name="__codelineno-67-25" href="#__codelineno-67-25"></a><span class="nv">KUBECONFIG</span><span class="o">=</span>~/.kube/config<span class="w"> </span>kubectl<span class="w"> </span>config<span class="w"> </span>rename-context<span class="w"> </span>kind-sm-mgt<span class="w"> </span>sm-mgt
<a id="__codelineno-67-26" name="__codelineno-67-26" href="#__codelineno-67-26"></a><span class="nv">SM_CONFIG</span><span class="o">=</span>~/.kube/config
</code></pre></div>
<p>The subsequent uses of <code>$SM_CONFIG</code> in this example assume that the
current context is still the one just established, "sm-mgt".</p>
<h3 id="the-space-manager-controller">The space-manager controller<a class="headerlink" href="#the-space-manager-controller" title="Permanent link">#</a></h3>
<p>You can get the latest version from GitHub with the following command,
which will get you the default branch (which is named "main"); add <code>-b
$branch</code> to the <code>git</code> command in order to get a different branch.</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/kubestellar/kubestellar
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="nb">cd</span><span class="w"> </span>kubestellar
</code></pre></div>
<p>Use the following commands to build and add the executables to your
<code>$PATH</code>.</p>
<p><div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="nb">cd</span><span class="w"> </span>space-framework
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>make<span class="w"> </span>build
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin:<span class="nv">$PATH</span>
</code></pre></div>
Next deploy the space framework CRDs in the space management cluster.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>config/crds/
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="nb">cd</span><span class="w"> </span>..
</code></pre></div>
Finally, start the space-manager controller.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>space-manager<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$SM_CONFIG</span><span class="w"> </span>--context<span class="w"> </span>sm-mgt<span class="w"> </span>-v<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">&amp;</span>&gt;<span class="w"> </span>/tmp/space-manager.log<span class="w"> </span><span class="p">&amp;</span>
</code></pre></div>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE example1-subs/example1-provider-kcp.md '&lt;!--example1-kcp-provider-start--&gt;' '&lt;!--example1-kcp-provider-end--&gt;' -->

<!-- END INCLUDE -->

<!-- BEGIN INCLUDE example1-subs/example1-post-provider.md '&lt;!--example1-post-provider-start--&gt;' '&lt;!--example1-post-provider-end--&gt;' -->

<h4 id="get-kubestellar">Get KubeStellar<a class="headerlink" href="#get-kubestellar" title="Permanent link">#</a></h4>
<p>You will need a local copy of KubeStellar.  You can either use the
pre-built archive (containing executables and config files) from a
release or get any desired version from GitHub and build.</p>
<h5 id="use-pre-built-archive">Use pre-built archive<a class="headerlink" href="#use-pre-built-archive" title="Permanent link">#</a></h5>
<p>Fetch the archive for your operating system and instruction set
architecture as follows, in which <code>$kubestellar_version</code> is your
chosen release of KubeStellar (see <a href="https://github.com/kubestellar/kubestellar/releases">the releases on
GitHub</a>) and
<code>$os_type</code> and <code>$arch_type</code> are chosen according to the list of
"assets" for your chosen release.</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>curl<span class="w"> </span>-SL<span class="w"> </span>-o<span class="w"> </span>kubestellar.tar.gz<span class="w"> </span><span class="s2">&quot;https://github.com/kubestellar/kubestellar/releases/download/</span><span class="si">${</span><span class="nv">kubestellar_version</span><span class="si">}</span><span class="s2">/kubestellar_</span><span class="si">${</span><span class="nv">kubestellar_version</span><span class="si">}</span><span class="s2">_</span><span class="si">${</span><span class="nv">os_type</span><span class="si">}</span><span class="s2">_</span><span class="si">${</span><span class="nv">arch_type</span><span class="si">}</span><span class="s2">.tar.gz</span>
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="s2">tar xzf kubestellar.tar.gz</span>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="s2">export PATH=</span><span class="nv">$PWD</span><span class="s2">/bin:</span><span class="nv">$PATH</span>
</code></pre></div>
<h5 id="get-from-github">Get from GitHub<a class="headerlink" href="#get-from-github" title="Permanent link">#</a></h5>
<p>You can get the latest version from GitHub with the following command,
which will get you the default branch (which is named "main"); add <code>-b
$branch</code> to the <code>git</code> command in order to get a different branch.</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/kubestellar/kubestellar
<a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="nb">cd</span><span class="w"> </span>kubestellar
</code></pre></div>
<p>Use the following commands to build and add the executables to your
<code>$PATH</code>.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>make<span class="w"> </span>build
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin:<span class="nv">$PATH</span>
</code></pre></div>
<p>In the following exhibited command lines, the commands described as
"KubeStellar commands" and the commands that start with <code>kubectl
kubestellar</code> rely on the KubeStellar <code>bin</code> directory being on the
<code>$PATH</code>.  Alternatively you could invoke them with explicit pathnames.
The kubectl plugin lines use fully specific executables (e.g.,
<code>kubectl kubestellar prep-for-syncer</code> corresponds to
<code>bin/kubectl-kubestellar-prep_for_syncer</code>).</p>
<h4 id="get-binaries-of-kube-bind-and-dex">Get binaries of kube-bind and dex<a class="headerlink" href="#get-binaries-of-kube-bind-and-dex" title="Permanent link">#</a></h4>
<p>The command below makes kube-bind binaries and dex binary available in <code>$PATH</code>.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a>rm<span class="w"> </span>-rf<span class="w"> </span>kube-bind
<a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/waltforme/kube-bind.git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="nb">pushd</span><span class="w"> </span>kube-bind<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>git<span class="w"> </span>checkout<span class="w"> </span>kubestellar<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a><span class="nv">IGNORE_GO_VERSION</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>make<span class="w"> </span>build
<a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin:<span class="nv">$PATH</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a><span class="nb">popd</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/dexidp/dex.git<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a><span class="nb">pushd</span><span class="w"> </span>dex<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-10" name="__codelineno-75-10" href="#__codelineno-75-10"></a><span class="nv">IGNORE_GO_VERSION</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>make<span class="w"> </span>build<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-11" name="__codelineno-75-11" href="#__codelineno-75-11"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/bin:<span class="nv">$PATH</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-75-12" name="__codelineno-75-12" href="#__codelineno-75-12"></a><span class="nb">popd</span>
</code></pre></div>
<h4 id="initialize-the-kubestellar-platform-as-bare-processes">Initialize the KubeStellar platform as bare processes<a class="headerlink" href="#initialize-the-kubestellar-platform-as-bare-processes" title="Permanent link">#</a></h4>
<p>In this step KubeStellar creates and populates the KubeStellar Core
Space (KCS) (formerly called the Edge Service Provider Workspace
(ESPW)), which exports the KubeStellar API.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>kubestellar<span class="w"> </span>-X<span class="w"> </span>init
</code></pre></div>
<h3 id="deploy-kcp-and-kubestellar-as-a-workload-in-a-kubernetes-cluster">Deploy kcp and KubeStellar as a workload in a Kubernetes cluster<a class="headerlink" href="#deploy-kcp-and-kubestellar-as-a-workload-in-a-kubernetes-cluster" title="Permanent link">#</a></h3>
<p>(This style of deployment requires release v0.6 or later of KubeStellar.)</p>
<p>You need a Kubernetes cluster; see <a href="../commands/#deployment-into-a-kubernetes-cluster">the documentation for <code>kubectl kubestellar deploy</code></a> for more information.</p>
<p>You will need a domain name that, on each of your clients, resolves to
an IP address that the client can use to open a TCP connection to the
Ingress controller's listening socket.</p>
<p>You will need the kcp <code>kubectl</code> plugins.  See <a href="./#start-kcp">the "Start kcp" section
above</a> for instructions on how to get all of the kcp
executables.</p>
<p>You will need to get a build of KubeStellar.  See
<a href="./#get-kubestellar">above</a>.</p>
<p>To do the deployment and prepare to use it you will be using <a href="../commands/#deployment-into-a-kubernetes-cluster">the
commands defined for
that</a>.  These
require your shell to be in a state where <code>kubectl</code> manipulates the
hosting cluster (the Kubernetes cluster into which you want to deploy
kcp and KubeStellar), either by virtue of having set your <code>KUBECONFIG</code>
envar appropriately or putting the relevant contents in
<code>~/.kube/config</code> or by passing <code>--kubeconfig</code> explicitly on the
following command lines.</p>
<p>Use the <a href="../commands/#deploy-to-cluster">kubectl kubestellar deploy
command</a> to do the deployment.</p>
<p>Then use the <a href="../commands/#fetch-kubeconfig-for-external-clients">kubectl kubestellar get-external-kubeconfig
command</a> to put
into a file the kubeconfig that you will use as a user of kcp and
KubeStellar.  Do not overwrite the kubeconfig file for your hosting
cluster.  But <em>do</em> update your <code>KUBECONFIG</code> envar setting or remember
to pass the new file with <code>--kubeconfig</code> on the command lines when
using kcp or KubeStellar. For example, you might use the following
commands to fetch and start using that kubeconfig file; the first
assumes that you deployed the core into a Kubernetes namespace named
"kubestellar".</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>kubectl<span class="w"> </span>kubestellar<span class="w"> </span>get-external-kubeconfig<span class="w"> </span>-n<span class="w"> </span>kubestellar<span class="w"> </span>-o<span class="w"> </span>kcs.kubeconfig
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/kcs.kubeconfig
</code></pre></div>
<p>Note that you now care about two different kubeconfig files: the one
that you were using earlier, which holds the contexts for your <code>kind</code>
clusters, and the one that you just fetched and started using for
working with the KubeStellar interface. The remainder of this document
assumes that your <code>kind</code> cluster contexts are in <code>~/.kube/config</code> and
the current context is for the KubeStellar hosting cluster.</p>
<p>The following variable will be used in later commands to indicate that
they are <em>not</em> being invoked from within the hosting cluster (see <a href="../commands/#in-cluster">doc
on "in-cluster"</a>).</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="nv">in_cluster</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</code></pre></div>
<h3 id="create-synctarget-and-location-objects-to-represent-the-florin-and-guilder-clusters">Create SyncTarget and Location objects to represent the florin and guilder clusters<a class="headerlink" href="#create-synctarget-and-location-objects-to-represent-the-florin-and-guilder-clusters" title="Permanent link">#</a></h3>
<p>Use the following two commands to put inventory objects in the IMW at
<code>root:imw1</code> that was automatically created during deployment of
KubeStellar. They label both florin and guilder with <code>env=prod</code>, and
also label guilder with <code>extended=yes</code>.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="nv">IMW1_KUBECONFIG</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">MY_KUBECONFIGS</span><span class="si">}</span><span class="s2">/imw1.kubeconfig&quot;</span>
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>kubectl-kubestellar-space-get_kubeconfig<span class="w"> </span>imw1<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$SM_CONFIG</span><span class="w"> </span><span class="nv">$in_cluster</span><span class="w"> </span><span class="nv">$IMW1_KUBECONFIG</span>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$IMW1_KUBECONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>kubestellar<span class="w"> </span>ensure<span class="w"> </span>location<span class="w"> </span>florin<span class="w">  </span>loc-name<span class="o">=</span>florin<span class="w">  </span><span class="nv">env</span><span class="o">=</span>prod
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$IMW1_KUBECONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>kubestellar<span class="w"> </span>ensure<span class="w"> </span>location<span class="w"> </span>guilder<span class="w"> </span>loc-name<span class="o">=</span>guilder<span class="w"> </span><span class="nv">env</span><span class="o">=</span>prod<span class="w"> </span><span class="nv">extended</span><span class="o">=</span>yes
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;describe the florin location object&quot;</span>
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$IMW1_KUBECONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>describe<span class="w"> </span>location.edge.kubestellar.io<span class="w"> </span>florin
</code></pre></div>
<p>Those two <code>ensure location</code> calls are equivalent to creating the following four objects.</p>
<div class="language-yaml highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edge.kubestellar.io/v2alpha1</span>
<a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SyncTarget</span>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-80-4" name="__codelineno-80-4" href="#__codelineno-80-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">florin</span>
<a id="__codelineno-80-5" name="__codelineno-80-5" href="#__codelineno-80-5"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-80-6" name="__codelineno-80-6" href="#__codelineno-80-6"></a><span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">florin</span>
<a id="__codelineno-80-7" name="__codelineno-80-7" href="#__codelineno-80-7"></a><span class="w">    </span><span class="nt">loc-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">florin</span>
<a id="__codelineno-80-8" name="__codelineno-80-8" href="#__codelineno-80-8"></a><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod</span>
<a id="__codelineno-80-9" name="__codelineno-80-9" href="#__codelineno-80-9"></a><span class="nn">---</span>
<a id="__codelineno-80-10" name="__codelineno-80-10" href="#__codelineno-80-10"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edge.kubestellar.io/v2alpha1</span>
<a id="__codelineno-80-11" name="__codelineno-80-11" href="#__codelineno-80-11"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Location</span>
<a id="__codelineno-80-12" name="__codelineno-80-12" href="#__codelineno-80-12"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-80-13" name="__codelineno-80-13" href="#__codelineno-80-13"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">florin</span>
<a id="__codelineno-80-14" name="__codelineno-80-14" href="#__codelineno-80-14"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-80-15" name="__codelineno-80-15" href="#__codelineno-80-15"></a><span class="w">    </span><span class="nt">loc-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">florin</span>
<a id="__codelineno-80-16" name="__codelineno-80-16" href="#__codelineno-80-16"></a><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod</span>
<a id="__codelineno-80-17" name="__codelineno-80-17" href="#__codelineno-80-17"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-80-18" name="__codelineno-80-18" href="#__codelineno-80-18"></a><span class="w">  </span><span class="nt">resource</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="nv">edge.kubestellar.io</span><span class="p p-Indicator">,</span><span class="nt"> version</span><span class="p">:</span><span class="w"> </span><span class="nv">v2alpha1</span><span class="p p-Indicator">,</span><span class="nt"> resource</span><span class="p">:</span><span class="w"> </span><span class="nv">synctargets</span><span class="p p-Indicator">}</span>
<a id="__codelineno-80-19" name="__codelineno-80-19" href="#__codelineno-80-19"></a><span class="w">  </span><span class="nt">instanceSelector</span><span class="p">:</span>
<a id="__codelineno-80-20" name="__codelineno-80-20" href="#__codelineno-80-20"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="nv">florin</span><span class="p p-Indicator">}</span>
<a id="__codelineno-80-21" name="__codelineno-80-21" href="#__codelineno-80-21"></a><span class="nn">---</span>
<a id="__codelineno-80-22" name="__codelineno-80-22" href="#__codelineno-80-22"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edge.kubestellar.io/v2alpha1</span>
<a id="__codelineno-80-23" name="__codelineno-80-23" href="#__codelineno-80-23"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SyncTarget</span>
<a id="__codelineno-80-24" name="__codelineno-80-24" href="#__codelineno-80-24"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-80-25" name="__codelineno-80-25" href="#__codelineno-80-25"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guilder</span>
<a id="__codelineno-80-26" name="__codelineno-80-26" href="#__codelineno-80-26"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-80-27" name="__codelineno-80-27" href="#__codelineno-80-27"></a><span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guilder</span>
<a id="__codelineno-80-28" name="__codelineno-80-28" href="#__codelineno-80-28"></a><span class="w">    </span><span class="nt">loc-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guilder</span>
<a id="__codelineno-80-29" name="__codelineno-80-29" href="#__codelineno-80-29"></a><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod</span>
<a id="__codelineno-80-30" name="__codelineno-80-30" href="#__codelineno-80-30"></a><span class="w">    </span><span class="nt">extended</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<a id="__codelineno-80-31" name="__codelineno-80-31" href="#__codelineno-80-31"></a><span class="nn">---</span>
<a id="__codelineno-80-32" name="__codelineno-80-32" href="#__codelineno-80-32"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">edge.kubestellar.io/v2alpha1</span>
<a id="__codelineno-80-33" name="__codelineno-80-33" href="#__codelineno-80-33"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Location</span>
<a id="__codelineno-80-34" name="__codelineno-80-34" href="#__codelineno-80-34"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-80-35" name="__codelineno-80-35" href="#__codelineno-80-35"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guilder</span>
<a id="__codelineno-80-36" name="__codelineno-80-36" href="#__codelineno-80-36"></a><span class="w">  </span><span class="nt">labels</span><span class="p">:</span>
<a id="__codelineno-80-37" name="__codelineno-80-37" href="#__codelineno-80-37"></a><span class="w">    </span><span class="nt">loc-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guilder</span>
<a id="__codelineno-80-38" name="__codelineno-80-38" href="#__codelineno-80-38"></a><span class="w">    </span><span class="nt">env</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod</span>
<a id="__codelineno-80-39" name="__codelineno-80-39" href="#__codelineno-80-39"></a><span class="w">    </span><span class="nt">extended</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span>
<a id="__codelineno-80-40" name="__codelineno-80-40" href="#__codelineno-80-40"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-80-41" name="__codelineno-80-41" href="#__codelineno-80-41"></a><span class="w">  </span><span class="nt">resource</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="nv">edge.kubestellar.io</span><span class="p p-Indicator">,</span><span class="nt"> version</span><span class="p">:</span><span class="w"> </span><span class="nv">v2alpha1</span><span class="p p-Indicator">,</span><span class="nt"> resource</span><span class="p">:</span><span class="w"> </span><span class="nv">synctargets</span><span class="p p-Indicator">}</span>
<a id="__codelineno-80-42" name="__codelineno-80-42" href="#__codelineno-80-42"></a><span class="w">  </span><span class="nt">instanceSelector</span><span class="p">:</span>
<a id="__codelineno-80-43" name="__codelineno-80-43" href="#__codelineno-80-43"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="nv">guilder</span><span class="p p-Indicator">}</span>
</code></pre></div>
<p>That script also deletes the Location named <code>default</code>, which is not
used in this PoC, if it shows up.</p>
<!-- END INCLUDE -->

<!-- BEGIN INCLUDE example1-subs/example1-stage-1a.md '&lt;!--example1-stage-1a-start--&gt;' '&lt;!--example1-stage-1a-end--&gt;' -->

<h3 id="the-mailbox-controller">The mailbox controller<a class="headerlink" href="#the-mailbox-controller" title="Permanent link">#</a></h3>
<p>The mailbox controller is one of the central controllers of
KubeStellar.  If you have deployed the KubeStellar core as Kubernetes
workload then this controller is already running in a pod in your
hosting cluster. If instead you are running these controllers as bare
processes then launch this controller as follows.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>mailbox-controller<span class="w"> </span>--external-access<span class="w"> </span>-v<span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="p">&amp;</span>&gt;<span class="w"> </span>/tmp/mailbox-controller.log<span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a>sleep<span class="w"> </span><span class="m">20</span>
</code></pre></div>
<p>This controller is in charge of maintaining the collection of mailbox
spaces, which are an implementation detail not intended for user
consumption. You can use the following command to wait for the
appearance of the mailbox spaces implied by the florin and guilder
<code>SyncTarget</code> objects that you made earlier.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="k">while</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="k">$(</span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>spaces<span class="w"> </span>-A<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;\-mb\-&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="k">)</span><span class="w"> </span>-ne<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="w">  </span>sleep<span class="w"> </span><span class="m">10</span>
<a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="k">done</span>
</code></pre></div>
<p>If it is working correctly, lines like the following will appear in
the controller's log (which is being written into /tmp/mailbox-controller.log if you ran the controller as a bare process above, otherwise you can fetch <a href="../commands/#fetch-a-log-from-a-kubestellar-runtime-container">as directed</a>).</p>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a>...
<a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>I1218<span class="w"> </span><span class="m">16</span>:36:14.743434<span class="w">  </span><span class="m">239027</span><span class="w"> </span>controller.go:277<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Created missing space&quot;</span><span class="w"> </span><span class="nv">worker</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">mbsName</span><span class="o">=</span><span class="s2">&quot;imw1-mb-ace9fd79-1c35-410d-879d-d73ec6f9fe6b&quot;</span>
<a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>...
<a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a>I1218<span class="w"> </span><span class="m">16</span>:36:14.759426<span class="w">  </span><span class="m">239027</span><span class="w"> </span>controller.go:277<span class="o">]</span><span class="w"> </span><span class="s2">&quot;Created missing space&quot;</span><span class="w"> </span><span class="nv">worker</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">mbsName</span><span class="o">=</span><span class="s2">&quot;imw1-mb-11c4c16a-82f9-48ad-b036-879aba135959&quot;</span>
</code></pre></div>
<p>You need a <code>-v</code> setting of 2 or numerically higher to get log messages
about individual mailbox spaces.</p>
<p>A mailbox space name is distinguished by <code>-mb-</code> separator.
You can get a listing of those mailbox spaces as follows.</p>
<p><div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>spaces<span class="w"> </span>-A
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a>NAMESPACE<span class="w">               </span>NAME<span class="w">                                           </span>AGE
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a>spaceprovider-default<span class="w">   </span>espw<span class="w">                                           </span>84s
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a>spaceprovider-default<span class="w">   </span>imw1<span class="w">                                           </span>76s
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a>spaceprovider-default<span class="w">   </span>imw1-mb-11c4c16a-82f9-48ad-b036-879aba135959<span class="w">   </span>20s
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>spaceprovider-default<span class="w">   </span>imw1-mb-ace9fd79-1c35-410d-879d-d73ec6f9fe6b<span class="w">   </span>20s
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a>spaceprovider-default<span class="w">   </span>wmw1<span class="w">                                           </span>53s
</code></pre></div></p>
<p>More usefully, using custom columns you can get a listing that shows
the <em>name</em> of the associated SyncTarget.</p>
<p><div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>spaces<span class="w"> </span>-n<span class="w"> </span>spaceprovider-default<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;custom-columns=NAME:.metadata.name,SYNCTARGET:.metadata.annotations[&#39;edge\.kubestellar\.io/sync-target-name&#39;],CLUSTER:.spec.cluster&quot;</span>
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>NAME<span class="w">                                           </span>SYNCTARGET<span class="w">   </span>CLUSTER
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a>espw<span class="w">                                           </span>&lt;none&gt;<span class="w">       </span>&lt;none&gt;
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a>imw1<span class="w">                                           </span>&lt;none&gt;<span class="w">       </span>&lt;none&gt;
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a>imw1-mb-11c4c16a-82f9-48ad-b036-879aba135959<span class="w">   </span>florin<span class="w">       </span>&lt;none&gt;
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a>imw1-mb-ace9fd79-1c35-410d-879d-d73ec6f9fe6b<span class="w">   </span>guilder<span class="w">      </span>&lt;none&gt;
<a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a>wmw1<span class="w">                                           </span>&lt;none&gt;<span class="w">       </span>&lt;none&gt;
</code></pre></div></p>
<p>Also: if you ever need to look up just one mailbox space by
SyncTarget name, you could do it as follows.</p>
<p><div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="nv">GUILDER_SPACE</span><span class="o">=</span><span class="k">$(</span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>space<span class="w"> </span>-n<span class="w"> </span>spaceprovider-default<span class="w"> </span>-o<span class="w"> </span>json<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.items | .[] | .metadata | select(.annotations [&quot;edge.kubestellar.io/sync-target-name&quot;] == &quot;guilder&quot;) | .name&#39;</span><span class="k">)</span>
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="nb">echo</span><span class="w"> </span>The<span class="w"> </span>guilder<span class="w"> </span>mailbox<span class="w"> </span>space<span class="w"> </span>name<span class="w"> </span>is<span class="w"> </span><span class="nv">$GUILDER_SPACE</span>
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>The<span class="w"> </span>guilder<span class="w"> </span>mailbox<span class="w"> </span>space<span class="w"> </span>name<span class="w"> </span>is<span class="w"> </span>imw1-mb-ace9fd79-1c35-410d-879d-d73ec6f9fe6b
</code></pre></div></p>
<p><div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="nv">FLORIN_SPACE</span><span class="o">=</span><span class="k">$(</span><span class="nv">KUBECONFIG</span><span class="o">=</span><span class="nv">$SM_CONFIG</span><span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>space<span class="w"> </span>-n<span class="w"> </span>spaceprovider-default<span class="w"> </span>-o<span class="w"> </span>json<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.items | .[] | .metadata | select(.annotations [&quot;edge.kubestellar.io/sync-target-name&quot;] == &quot;florin&quot;) | .name&#39;</span><span class="k">)</span>
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="nb">echo</span><span class="w"> </span>The<span class="w"> </span>florin<span class="w"> </span>mailbox<span class="w"> </span>space<span class="w"> </span>name<span class="w"> </span>is<span class="w"> </span><span class="nv">$FLORIN_SPACE</span>
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>The<span class="w"> </span>florin<span class="w"> </span>mailbox<span class="w"> </span>space<span class="w"> </span>name<span class="w"> </span>is<span class="w"> </span>imw1-mb-11c4c16a-82f9-48ad-b036-879aba135959
</code></pre></div></p>
<!-- END INCLUDE -->

<h3 id="register-kubestellar-syncer-on-the-target-clusters">Register KubeStellar-Syncer on the target clusters<a class="headerlink" href="#register-kubestellar-syncer-on-the-target-clusters" title="Permanent link">#</a></h3>
<p>Once KubeStellar setup is done, KubeStellar-Syncer can be deployed on the target cluster easily by the following steps.</p>
<h4 id="for-the-target-cluster-of-guilder">For the target cluster of <code>guilder</code>,<a class="headerlink" href="#for-the-target-cluster-of-guilder" title="Permanent link">#</a></h4>
<!-- BEGIN INCLUDE kubestellar-syncer-subs/kubestellar-syncer-0-deploy-guilder.md '&lt;!--kubestellar-syncer-0-deploy-guilder-start--&gt;' '&lt;!--kubestellar-syncer-0-deploy-guilder-end--&gt;' -->

<p>Go to KCS and find the mailbox space name.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="nv">espw_kubeconfig</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">MY_KUBECONFIGS</span><span class="si">}</span><span class="s2">/espw.kubeconfig&quot;</span>
<a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>kubectl-kubestellar-space-get_kubeconfig<span class="w"> </span>espw<span class="w"> </span><span class="nv">$in_cluster</span><span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$SM_CONFIG</span><span class="w"> </span><span class="nv">$espw_kubeconfig</span>
<a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>
<a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="nv">pvname</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$espw_kubeconfig</span><span class="w"> </span>get<span class="w"> </span>synctargets.edge.kubestellar.io<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>guilder<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="sb">`</span>
<a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a><span class="nv">stuid</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$espw_kubeconfig</span><span class="w"> </span>get<span class="w"> </span>synctargets.edge.kubestellar.io<span class="w"> </span><span class="nv">$pvname</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.metadata.uid}&quot;</span><span class="sb">`</span>
<a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a><span class="nv">mbs_name</span><span class="o">=</span><span class="s2">&quot;imw1-mb-</span><span class="nv">$stuid</span><span class="s2">&quot;</span>
<a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;mailbox space name = </span><span class="nv">$mbs_name</span><span class="s2">&quot;</span>
</code></pre></div></p>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>mailbox<span class="w"> </span>space<span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>vosh9816n2xmpdwm-mb-bf1277df-0da9-4a26-b0fc-3318862b1a5e
</code></pre></div>
<p>Go to the mailbox space and run the following command to obtain yaml manifests to bootstrap KubeStellar-Syncer.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="nv">mbs_kubeconfig</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">MY_KUBECONFIGS</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">mbs_name</span><span class="si">}</span><span class="s2">.kubeconfig&quot;</span>
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a>kubectl-kubestellar-space-get_kubeconfig<span class="w"> </span><span class="si">${</span><span class="nv">mbs_name</span><span class="si">}</span><span class="w"> </span><span class="nv">$in_cluster</span><span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$SM_CONFIG</span><span class="w"> </span><span class="nv">$mbs_kubeconfig</span>
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a>
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a>./bin/kubectl-kubestellar-syncer_gen<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$mbs_kubeconfig</span><span class="w"> </span>guilder<span class="w"> </span>--syncer-image<span class="w"> </span>quay.io/kubestellar/syncer:v0.2.2<span class="w"> </span>-o<span class="w"> </span>guilder-syncer.yaml
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a>Current<span class="w"> </span>workspace<span class="w"> </span>is<span class="w"> </span><span class="s2">&quot;root:vosh9816n2xmpdwm-mb-bf1277df-0da9-4a26-b0fc-3318862b1a5e&quot;</span>.
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>Creating<span class="w"> </span>service<span class="w"> </span>account<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span>
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>Creating<span class="w"> </span>cluster<span class="w"> </span>role<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span><span class="w"> </span>to<span class="w"> </span>give<span class="w"> </span>service<span class="w"> </span>account<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span>
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a>
<a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a><span class="m">1</span>.<span class="w"> </span>write<span class="w"> </span>and<span class="w"> </span>sync<span class="w"> </span>access<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>synctarget<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span>
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a><span class="m">2</span>.<span class="w"> </span>write<span class="w"> </span>access<span class="w"> </span>to<span class="w"> </span>apiresourceimports.
<a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>
<a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>Creating<span class="w"> </span>or<span class="w"> </span>updating<span class="w"> </span>cluster<span class="w"> </span>role<span class="w"> </span>binding<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span><span class="w"> </span>to<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>service<span class="w"> </span>account<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span><span class="w"> </span>to<span class="w"> </span>cluster<span class="w"> </span>role<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span>.
<a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a>
<a id="__codelineno-95-10" name="__codelineno-95-10" href="#__codelineno-95-10"></a>Wrote<span class="w"> </span>WEC<span class="w"> </span>manifest<span class="w"> </span>to<span class="w"> </span>guilder-syncer.yaml<span class="w"> </span><span class="k">for</span><span class="w"> </span>namespace<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span>.<span class="w"> </span>Use
<a id="__codelineno-95-11" name="__codelineno-95-11" href="#__codelineno-95-11"></a>
<a id="__codelineno-95-12" name="__codelineno-95-12" href="#__codelineno-95-12"></a><span class="w">  </span><span class="nv">KUBECONFIG</span><span class="o">=</span>&lt;workload-execution-cluster-config&gt;<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;guilder-syncer.yaml&quot;</span>
<a id="__codelineno-95-13" name="__codelineno-95-13" href="#__codelineno-95-13"></a>
<a id="__codelineno-95-14" name="__codelineno-95-14" href="#__codelineno-95-14"></a>to<span class="w"> </span>apply<span class="w"> </span>it.<span class="w"> </span>Use
<a id="__codelineno-95-15" name="__codelineno-95-15" href="#__codelineno-95-15"></a>
<a id="__codelineno-95-16" name="__codelineno-95-16" href="#__codelineno-95-16"></a><span class="w">  </span><span class="nv">KUBECONFIG</span><span class="o">=</span>&lt;workload-execution-cluster-config&gt;<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-guilder-wfeig2lv&quot;</span><span class="w"> </span>kubestellar-syncer-guilder-wfeig2lv
<a id="__codelineno-95-17" name="__codelineno-95-17" href="#__codelineno-95-17"></a>
<a id="__codelineno-95-18" name="__codelineno-95-18" href="#__codelineno-95-18"></a>to<span class="w"> </span>verify<span class="w"> </span>the<span class="w"> </span>syncer<span class="w"> </span>pod<span class="w"> </span>is<span class="w"> </span>running.
<a id="__codelineno-95-19" name="__codelineno-95-19" href="#__codelineno-95-19"></a>Current<span class="w"> </span>workspace<span class="w"> </span>is<span class="w"> </span><span class="s2">&quot;root:espw&quot;</span>.
</code></pre></div></p>
<p>Deploy the generated yaml manifest to the target cluster.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span>~/.kube/config<span class="w"> </span>kubectl<span class="w"> </span>--context<span class="w"> </span>kind-guilder<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>guilder-syncer.yaml
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a>namespace/kubestellar-syncer-guilder-wfeig2lv<span class="w"> </span>created
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>serviceaccount/kubestellar-syncer-guilder-wfeig2lv<span class="w"> </span>created
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>secret/kubestellar-syncer-guilder-wfeig2lv-token<span class="w"> </span>created
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a>clusterrole.rbac.authorization.k8s.io/kubestellar-syncer-guilder-wfeig2lv<span class="w"> </span>created
<a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>clusterrolebinding.rbac.authorization.k8s.io/kubestellar-syncer-guilder-wfeig2lv<span class="w"> </span>created
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>secret/kubestellar-syncer-guilder-wfeig2lv<span class="w"> </span>created
<a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a>deployment.apps/kubestellar-syncer-guilder-wfeig2lv<span class="w"> </span>created
</code></pre></div></p>
<p>Check that the syncer is running, as follows.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span>~/.kube/config<span class="w"> </span>kubectl<span class="w"> </span>--context<span class="w"> </span>kind-guilder<span class="w"> </span>get<span class="w"> </span>deploy<span class="w"> </span>-A
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a>NAMESPACE<span class="w">                             </span>NAME<span class="w">                                  </span>READY<span class="w">   </span>UP-TO-DATE<span class="w">   </span>AVAILABLE<span class="w">   </span>AGE
<a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>kubestellar-syncer-guilder-saaywsu5<span class="w">   </span>kubestellar-syncer-guilder-saaywsu5<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>52s
<a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>kube-system<span class="w">                           </span>coredns<span class="w">                               </span><span class="m">2</span>/2<span class="w">     </span><span class="m">2</span><span class="w">            </span><span class="m">2</span><span class="w">           </span>35m
<a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a>local-path-storage<span class="w">                    </span>local-path-provisioner<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>35m
</code></pre></div></p>
<!-- END INCLUDE -->

<h4 id="for-the-target-cluster-of-florin">For the target cluster of <code>florin</code>,<a class="headerlink" href="#for-the-target-cluster-of-florin" title="Permanent link">#</a></h4>
<!-- BEGIN INCLUDE kubestellar-syncer-subs/kubestellar-syncer-0-deploy-florin.md '&lt;!--kubestellar-syncer-0-deploy-florin-start--&gt;' '&lt;!--kubestellar-syncer-0-deploy-florin-end--&gt;' -->

<p>Go to KCS and find the mailbox space name.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="nv">pvname</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$espw_kubeconfig</span><span class="w"> </span>get<span class="w"> </span>synctargets.edge.kubestellar.io<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>florin<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="sb">`</span>
<a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a><span class="nv">stuid</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$espw_kubeconfig</span><span class="w"> </span>get<span class="w"> </span>synctargets.edge.kubestellar.io<span class="w"> </span><span class="nv">$pvname</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.metadata.uid}&quot;</span><span class="sb">`</span>
<a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a><span class="nv">mbs_name</span><span class="o">=</span><span class="s2">&quot;imw1-mb-</span><span class="nv">$stuid</span><span class="s2">&quot;</span>
<a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;mailbox space name = </span><span class="nv">$mbs_name</span><span class="s2">&quot;</span>
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a>mailbox<span class="w"> </span>space<span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>vosh9816n2xmpdwm-mb-bb47149d-52d3-4f14-84dd-7b64ac01c97f
</code></pre></div></p>
<p>Go to the mailbox space and run the following command to obtain yaml manifests to bootstrap KubeStellar-Syncer.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="nv">mbs_kubeconfig</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">MY_KUBECONFIGS</span><span class="si">}</span><span class="s2">/</span><span class="si">${</span><span class="nv">mbs_name</span><span class="si">}</span><span class="s2">.kubeconfig&quot;</span>
<a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a>kubectl-kubestellar-space-get_kubeconfig<span class="w"> </span><span class="si">${</span><span class="nv">mbs_name</span><span class="si">}</span><span class="w"> </span><span class="nv">$in_cluster</span><span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$SM_CONFIG</span><span class="w"> </span><span class="nv">$mbs_kubeconfig</span>
<a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a>
<a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a>./bin/kubectl-kubestellar-syncer_gen<span class="w"> </span>--kubeconfig<span class="w"> </span><span class="nv">$mbs_kubeconfig</span><span class="w"> </span>florin<span class="w"> </span>--syncer-image<span class="w"> </span>quay.io/kubestellar/syncer:v0.2.2<span class="w"> </span>-o<span class="w"> </span>florin-syncer.yaml
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a>Current<span class="w"> </span>workspace<span class="w"> </span>is<span class="w"> </span><span class="s2">&quot;root:vosh9816n2xmpdwm-mb-bb47149d-52d3-4f14-84dd-7b64ac01c97f&quot;</span>.
<a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>Creating<span class="w"> </span>service<span class="w"> </span>account<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span>
<a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>Creating<span class="w"> </span>cluster<span class="w"> </span>role<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span><span class="w"> </span>to<span class="w"> </span>give<span class="w"> </span>service<span class="w"> </span>account<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span>
<a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a>
<a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a><span class="w"> </span><span class="m">1</span>.<span class="w"> </span>write<span class="w"> </span>and<span class="w"> </span>sync<span class="w"> </span>access<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>synctarget<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span>
<a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a><span class="w"> </span><span class="m">2</span>.<span class="w"> </span>write<span class="w"> </span>access<span class="w"> </span>to<span class="w"> </span>apiresourceimports.
<a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>
<a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>Creating<span class="w"> </span>or<span class="w"> </span>updating<span class="w"> </span>cluster<span class="w"> </span>role<span class="w"> </span>binding<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span><span class="w"> </span>to<span class="w"> </span><span class="nb">bind</span><span class="w"> </span>service<span class="w"> </span>account<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span><span class="w"> </span>to<span class="w"> </span>cluster<span class="w"> </span>role<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span>.
<a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>
<a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>Wrote<span class="w"> </span>workload<span class="w"> </span>execution<span class="w"> </span>cluster<span class="w"> </span><span class="o">(</span>WEC<span class="o">)</span><span class="w"> </span>manifest<span class="w"> </span>to<span class="w"> </span>florin-syncer.yaml<span class="w"> </span><span class="k">for</span><span class="w"> </span>namespace<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span>.<span class="w"> </span>Use
<a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a>
<a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a><span class="w">  </span><span class="nv">KUBECONFIG</span><span class="o">=</span>&lt;workload-execution-cluster-config&gt;<span class="w"> </span>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;florin-syncer.yaml&quot;</span>
<a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>
<a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a>to<span class="w"> </span>apply<span class="w"> </span>it.<span class="w"> </span>Use
<a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a>
<a id="__codelineno-103-16" name="__codelineno-103-16" href="#__codelineno-103-16"></a><span class="w">  </span><span class="nv">KUBECONFIG</span><span class="o">=</span>&lt;workload-execution-cluster-config&gt;<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>deployment<span class="w"> </span>-n<span class="w"> </span><span class="s2">&quot;kubestellar-syncer-florin-32uaph9l&quot;</span><span class="w"> </span>kubestellar-syncer-florin-32uaph9l
<a id="__codelineno-103-17" name="__codelineno-103-17" href="#__codelineno-103-17"></a>
<a id="__codelineno-103-18" name="__codelineno-103-18" href="#__codelineno-103-18"></a>to<span class="w"> </span>verify<span class="w"> </span>the<span class="w"> </span>syncer<span class="w"> </span>pod<span class="w"> </span>is<span class="w"> </span>running.
<a id="__codelineno-103-19" name="__codelineno-103-19" href="#__codelineno-103-19"></a>Current<span class="w"> </span>workspace<span class="w"> </span>is<span class="w"> </span><span class="s2">&quot;root:espw&quot;</span>.
</code></pre></div></p>
<p>Deploy the generated yaml manifest to the target cluster.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span>~/.kube/config<span class="w"> </span>kubectl<span class="w"> </span>--context<span class="w"> </span>kind-florin<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>florin-syncer.yaml
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a>namespace/kubestellar-syncer-florin-32uaph9l<span class="w"> </span>created
<a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>serviceaccount/kubestellar-syncer-florin-32uaph9l<span class="w"> </span>created
<a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>secret/kubestellar-syncer-florin-32uaph9l-token<span class="w"> </span>created
<a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a>clusterrole.rbac.authorization.k8s.io/kubestellar-syncer-florin-32uaph9l<span class="w"> </span>created
<a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>clusterrolebinding.rbac.authorization.k8s.io/kubestellar-syncer-florin-32uaph9l<span class="w"> </span>created
<a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a>secret/kubestellar-syncer-florin-32uaph9l<span class="w"> </span>created
<a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a>deployment.apps/kubestellar-syncer-florin-32uaph9l<span class="w"> </span>created
</code></pre></div></p>
<p>Check that the syncer is running, as follows.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="nv">KUBECONFIG</span><span class="o">=</span>~/.kube/config<span class="w"> </span>kubectl<span class="w"> </span>--context<span class="w"> </span>kind-florin<span class="w"> </span>get<span class="w"> </span>deploy<span class="w"> </span>-A
</code></pre></div>
<div class="language-bash no-copy highlight"><pre><span></span><code><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a>NAMESPACE<span class="w">                             </span>NAME<span class="w">                                  </span>READY<span class="w">   </span>UP-TO-DATE<span class="w">   </span>AVAILABLE<span class="w">   </span>AGE
<a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a>kubestellar-syncer-florin-32uaph9l<span class="w">    </span>kubestellar-syncer-florin-32uaph9l<span class="w">    </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>42s
<a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a>kube-system<span class="w">                           </span>coredns<span class="w">                               </span><span class="m">2</span>/2<span class="w">     </span><span class="m">2</span><span class="w">            </span><span class="m">2</span><span class="w">           </span>41m
<a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a>local-path-storage<span class="w">                    </span>local-path-provisioner<span class="w">                </span><span class="m">1</span>/1<span class="w">     </span><span class="m">1</span><span class="w">            </span><span class="m">1</span><span class="w">           </span>41m
</code></pre></div></p>
<!-- END INCLUDE -->

<h3 id="teardown-the-environment">Teardown the environment<a class="headerlink" href="#teardown-the-environment" title="Permanent link">#</a></h3>
<!-- BEGIN INCLUDE ../../common-subs/teardown-the-environment.md '&lt;!--teardown-the-environment-start--&gt;' '&lt;!--teardown-the-environment-end--&gt;' -->

<p>To remove the example usage, delete the IMW and WMW and kind clusters run the following commands:</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a>rm<span class="w"> </span>florin-syncer.yaml<span class="w"> </span>guilder-syncer.yaml<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
<a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>kubectl<span class="w"> </span>ws<span class="w"> </span>root
<a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>kind<span class="w"> </span>delete<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>florin
<a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a>kind<span class="w"> </span>delete<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>guilder
</code></pre></div>
<p>Teardown of KubeStellar depends on which style of deployment was used.</p>
<h3 id="teardown-bare-processes">Teardown bare processes<a class="headerlink" href="#teardown-bare-processes" title="Permanent link">#</a></h3>
<p>The following command will stop whatever KubeStellar controllers are running.</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a>kubestellar<span class="w"> </span>stop
</code></pre></div>
<p>Stop and uninstall KubeStellar and the space provider with the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a>remove-kubestellar
</code></pre></div>
<h3 id="teardown-kubernetes-workload">Teardown Kubernetes workload<a class="headerlink" href="#teardown-kubernetes-workload" title="Permanent link">#</a></h3>
<p>With <code>kubectl</code> configured to manipulate the hosting cluster, the following command will remove the workload that is the space provider and KubeStellar.</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a>helm<span class="w"> </span>delete<span class="w"> </span>kubestellar
</code></pre></div>
<!-- END INCLUDE -->

<hr />
<h2 id="deep-dive">Deep-dive<a class="headerlink" href="#deep-dive" title="Permanent link">#</a></h2>
<h3 id="the-details-about-the-registration-of-kubestellar-syncer-on-an-edge-cluster-and-a-workspace">The details about the registration of KubeStellar-Syncer on an Edge cluster and a workspace<a class="headerlink" href="#the-details-about-the-registration-of-kubestellar-syncer-on-an-edge-cluster-and-a-workspace" title="Permanent link">#</a></h3>
<p>KubeStellar-Syncer is deployed on an Edge cluster easily by the following steps.</p>
<ol>
<li>Create SyncTarget and Location<ul>
<li>Mailbox controller creates the mailbox workspace automatically </li>
</ul>
</li>
<li>Get the mailbox workspace name</li>
<li>Use the following command to obtain yaml manifests to bootstrap KubeStellar-Syncer
    <div class="language-console highlight"><pre><span></span><code><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="go">kubectl ws &lt;mb-ws name&gt;</span>
<a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a><span class="go">bin/kubectl-kubestellar-syncer_gen &lt;Edge Sync Target name&gt; --syncer-image &lt;KubeStellar-Syncer image&gt; -o kubestellar-syncer.yaml</span>
</code></pre></div>
    Here, <code>bin/kubectl-kubestellar-syncer_gen</code> refers to a special variant of KubeStellar's
    kubectl plugin that includes the implementation of the functionality needed
    here.  This variant, under the special name shown here, is a normal part of
    the <code>bin</code> of KubeStellar.
    For the KubeStellar-Syncer image, please select an official image from https://quay.io/repository/kubestellar/syncer?tab=tags. For example, <code>--syncer-image quay.io/kubestellar/syncer:git-08289ea05-clean</code>. You can also create a syncer image from the source following <a href="#build-kubestellar-syncer-image">Build KubeStellar-Syncer Image</a>.</li>
<li>Deploy KubeStellar-Syncer on an Edge cluster</li>
<li>Syncer starts to run on the Edge cluster<ul>
<li>KubeStellar-Syncer starts watching and consuming SyncerConfig</li>
</ul>
</li>
</ol>
<p>The overall diagram is as follows:</p>
<p><img alt="kubestellar-syncer boot" src="../images/kubestellar-syncer-boot.png" /></p>
<h3 id="what-kubestellar-syncer-gen-plugin-does">What KubeStellar syncer-gen plugin does<a class="headerlink" href="#what-kubestellar-syncer-gen-plugin-does" title="Permanent link">#</a></h3>
<p>In order for Syncer to sync resources between upstream (workspace) and downstream (workload execution cluster), access information for both is required. </p>
<p>For the upstream access, Syncer's registration command (<code>kubectl kubestellar syncer-gen</code>) creates a ServiceAccount, ClusterRole, and ClusterRoleBinding in the workspace, and then generates a kubeconfig manifest from the ServiceAccount token, KCP server URL, and the server certificates. The kubeconfig manifest is embedded in a secret manifest and the secret is mounted to <code>/kcp/</code> in Syncer pod. The command generates such deployment manifest as Syncer reads <code>/kcp/</code> for the upstream Kubeconfig. </p>
<p>On the other hand, for the downstream part, in addition to the deployment manifest, the command generates a ServiceAccount, Role/ClusterRole, RoleBinding/ClusterRoleBinding for Syncer to access resources on the WEC. These resources for the downstream part are the resources to be deployed to the downstream cluster. The ServiceAccount is set to <code>serviceAccountName</code> in the deployment manifest.</p>
<p>Note: In addition to that, the command creates an EdgeSyncConfig CRD if it does not exist, and creates a default EdgeSyncConfig resource with the name specified in the command (<code>kubectl kubestellar syncer-gen &lt;name&gt;</code>). The default EdgeSyncConfig is no longer needed since Syncer now consumes all EdgeSyncConfigs in the workspace. Furthermore, creation of the EdgeSyncConfig CRD will also no longer be needed since we will switch to using SyncerConfig rather than EdgeSyncConfig in near future.</p>
<p>The source code of the command is <a href="https://github.com/kubestellar/kubestellar/blob/main/pkg/cliplugins/kubestellar/syncer-gen/edgesync.go">https://github.com/kubestellar/kubestellar/blob/main/pkg/cliplugins/kubestellar/syncer-gen/edgesync.go</a>.</p>
<p>The equivalent manual steps are as follows: </p>
<!-- BEGIN INCLUDE kubestellar-syncer-subs/kubestellar-syncer-1-syncer-gen-plugin.md '&lt;!--kubestellar-syncer-1-syncer-gen-plugin-start--&gt;' '&lt;!--kubestellar-syncer-1-syncer-gen-plugin-end--&gt;' -->

<p>The remainder is not fully debugged.</p>
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="nb">exit</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>Generate UUID for Syncer identification.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="nv">syncer_id</span><span class="o">=</span><span class="s2">&quot;syncer-&quot;</span><span class="sb">`</span>uuidgen<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39;[:upper:]&#39;</span><span class="w"> </span><span class="s1">&#39;[:lower:]&#39;</span><span class="sb">`</span>
</code></pre></div></p>
<p>Go to a workspace.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>kubectl<span class="w"> </span>ws<span class="w"> </span>root
<a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>kubectl<span class="w"> </span>ws<span class="w"> </span>create<span class="w"> </span>ws1<span class="w"> </span>--enter
</code></pre></div></p>
<p>Create the following APIBinding in the workspace (Note that in the case of mailbox workspaces, it's done by mailbox controller at creating the mailbox workspace.)
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>cat<span class="w"> </span><span class="s">&lt;&lt; EOL | kubectl apply -f -</span>
<a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a><span class="s">apiVersion: apis.kcp.io/v1alpha1</span>
<a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a><span class="s">kind: APIBinding</span>
<a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a><span class="s">metadata:</span>
<a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a><span class="s">  name: bind-espw</span>
<a id="__codelineno-116-6" name="__codelineno-116-6" href="#__codelineno-116-6"></a><span class="s">spec:</span>
<a id="__codelineno-116-7" name="__codelineno-116-7" href="#__codelineno-116-7"></a><span class="s">  reference:</span>
<a id="__codelineno-116-8" name="__codelineno-116-8" href="#__codelineno-116-8"></a><span class="s">    export:</span>
<a id="__codelineno-116-9" name="__codelineno-116-9" href="#__codelineno-116-9"></a><span class="s">      path: root:espw</span>
<a id="__codelineno-116-10" name="__codelineno-116-10" href="#__codelineno-116-10"></a><span class="s">      name: edge.kubestellar.io</span>
<a id="__codelineno-116-11" name="__codelineno-116-11" href="#__codelineno-116-11"></a><span class="s">EOL</span>
</code></pre></div></p>
<p>Create a serviceaccount in the workspace.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a>cat<span class="w"> </span><span class="s">&lt;&lt; EOL | kubectl apply -f -</span>
<a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a><span class="s">apiVersion: v1</span>
<a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a><span class="s">kind: ServiceAccount</span>
<a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a><span class="s">metadata:</span>
<a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a><span class="s">  name: $syncer_id</span>
<a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a><span class="s">EOL</span>
</code></pre></div></p>
<p>Create clusterrole and clusterrolebinding to bind the serviceaccount to the role.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>cat<span class="w"> </span><span class="s">&lt;&lt; EOL | kubectl apply -f -</span>
<a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a><span class="s">apiVersion: rbac.authorization.k8s.io/v1</span>
<a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a><span class="s">kind: ClusterRole</span>
<a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a><span class="s">metadata:</span>
<a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a><span class="s">  name: $syncer_id</span>
<a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a><span class="s">rules:</span>
<a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a><span class="s">- apiGroups: [&quot;*&quot;]</span>
<a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a><span class="s">  resources: [&quot;*&quot;]</span>
<a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a><span class="s">  verbs: [&quot;*&quot;]</span>
<a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a><span class="s">- nonResourceURLs: [&quot;/&quot;]</span>
<a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a><span class="s">  verbs: [&quot;access&quot;]</span>
<a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a><span class="s">---</span>
<a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a><span class="s">apiVersion: rbac.authorization.k8s.io/v1</span>
<a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a><span class="s">kind: ClusterRoleBinding</span>
<a id="__codelineno-118-15" name="__codelineno-118-15" href="#__codelineno-118-15"></a><span class="s">metadata:</span>
<a id="__codelineno-118-16" name="__codelineno-118-16" href="#__codelineno-118-16"></a><span class="s">  name: $syncer_id</span>
<a id="__codelineno-118-17" name="__codelineno-118-17" href="#__codelineno-118-17"></a><span class="s">roleRef:</span>
<a id="__codelineno-118-18" name="__codelineno-118-18" href="#__codelineno-118-18"></a><span class="s">  apiGroup: rbac.authorization.k8s.io</span>
<a id="__codelineno-118-19" name="__codelineno-118-19" href="#__codelineno-118-19"></a><span class="s">  kind: ClusterRole</span>
<a id="__codelineno-118-20" name="__codelineno-118-20" href="#__codelineno-118-20"></a><span class="s">  name: $syncer_id</span>
<a id="__codelineno-118-21" name="__codelineno-118-21" href="#__codelineno-118-21"></a><span class="s">subjects:</span>
<a id="__codelineno-118-22" name="__codelineno-118-22" href="#__codelineno-118-22"></a><span class="s">- apiGroup: &quot;&quot;</span>
<a id="__codelineno-118-23" name="__codelineno-118-23" href="#__codelineno-118-23"></a><span class="s">  kind: ServiceAccount</span>
<a id="__codelineno-118-24" name="__codelineno-118-24" href="#__codelineno-118-24"></a><span class="s">  name: $syncer_id</span>
<a id="__codelineno-118-25" name="__codelineno-118-25" href="#__codelineno-118-25"></a><span class="s">  namespace: default</span>
<a id="__codelineno-118-26" name="__codelineno-118-26" href="#__codelineno-118-26"></a><span class="s">EOL</span>
</code></pre></div></p>
<p>Get the serviceaccount token that will be set in the upstream kubeconfig manifest.  <strong>NOTE</strong> This part is outdated due to the recent denaturing of ServiceAccounts in kcp workspaces; the syncer-gen plugin will actually wait a little while and then create the Secret if nothing else has.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="nv">secret_name</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span>-o<span class="w"> </span>custom-columns<span class="o">=</span><span class="s2">&quot;:.metadata.name&quot;</span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$syncer_id</span><span class="sb">`</span>
<a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a><span class="nv">token</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>get<span class="w"> </span>secret<span class="w"> </span><span class="nv">$secret_name</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s1">&#39;{.data.token}&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="sb">`</span>
</code></pre></div></p>
<p>Get the certificates that will be set in the upstream kubeconfig manifest.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="nv">cacrt</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>config<span class="w"> </span>view<span class="w"> </span>--minify<span class="w"> </span>--raw<span class="w"> </span><span class="p">|</span><span class="w"> </span>yq<span class="w"> </span><span class="s2">&quot;.clusters[0].cluster.certificate-authority-data&quot;</span><span class="sb">`</span>
</code></pre></div></p>
<p>Get server_url that will be set in the upstream kubeconfig manifest.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="nv">server_url</span><span class="o">=</span><span class="sb">`</span>kubectl<span class="w"> </span>config<span class="w"> </span>view<span class="w"> </span>--minify<span class="w"> </span>--raw<span class="w"> </span><span class="p">|</span><span class="w"> </span>yq<span class="w"> </span><span class="s2">&quot;.clusters[0].cluster.server&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;s|https://\(.*\):\([^/]*\)/.*|https://\1:\2|g&#39;</span><span class="sb">`</span>
</code></pre></div></p>
<p>Set some other parameters.</br>
a. downstream_namespace where Syncer Pod runs
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="nv">downstream_namespace</span><span class="o">=</span><span class="s2">&quot;kubestellar-</span><span class="nv">$syncer_id</span><span class="s2">&quot;</span>
</code></pre></div>
b. Syncer image
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="nv">image</span><span class="o">=</span><span class="s2">&quot;quay.io/kubestellar/syncer:v0.2.2&quot;</span>
</code></pre></div></p>
<p>Download manifest template.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a>curl<span class="w"> </span>-LO<span class="w"> </span>https://raw.githubusercontent.com/kubestellar/kubestellar/main/pkg/syncer/scripts/kubestellar-syncer-bootstrap.template.yaml
</code></pre></div></p>
<p>Generate manifests to bootstrap KubeStellar-Syncer.
<div class="language-shell highlight"><pre><span></span><code><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="nv">syncer_id</span><span class="o">=</span><span class="nv">$syncer_id</span><span class="w"> </span><span class="nv">cacrt</span><span class="o">=</span><span class="nv">$cacrt</span><span class="w"> </span><span class="nv">token</span><span class="o">=</span><span class="nv">$token</span><span class="w"> </span><span class="nv">server_url</span><span class="o">=</span><span class="nv">$server_url</span><span class="w"> </span><span class="nv">downstream_namespace</span><span class="o">=</span><span class="nv">$downstream_namespace</span><span class="w"> </span><span class="nv">image</span><span class="o">=</span><span class="nv">$image</span><span class="w"> </span>envsubst<span class="w"> </span>&lt;<span class="w"> </span>kubestellar-syncer-bootstrap.template.yaml
</code></pre></div>
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a>---
<a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a>apiVersion: v1
<a id="__codelineno-126-3" name="__codelineno-126-3" href="#__codelineno-126-3"></a>kind: Namespace
<a id="__codelineno-126-4" name="__codelineno-126-4" href="#__codelineno-126-4"></a>metadata:
<a id="__codelineno-126-5" name="__codelineno-126-5" href="#__codelineno-126-5"></a>  name: kubestellar-syncer-9ee90de6-eb76-4ddb-9346-c4c8d92075e1
<a id="__codelineno-126-6" name="__codelineno-126-6" href="#__codelineno-126-6"></a>---
<a id="__codelineno-126-7" name="__codelineno-126-7" href="#__codelineno-126-7"></a>apiVersion: v1
<a id="__codelineno-126-8" name="__codelineno-126-8" href="#__codelineno-126-8"></a>kind: ServiceAccount
<a id="__codelineno-126-9" name="__codelineno-126-9" href="#__codelineno-126-9"></a>metadata:
<a id="__codelineno-126-10" name="__codelineno-126-10" href="#__codelineno-126-10"></a>...
</code></pre></div></p>
<!-- END INCLUDE -->

<h3 id="deploy-workload-objects-from-kubestellar-to-edge-cluster">Deploy workload objects from KubeStellar to Edge cluster<a class="headerlink" href="#deploy-workload-objects-from-kubestellar-to-edge-cluster" title="Permanent link">#</a></h3>
<p>To deploy resources to Edge clusters, create the following in workload management workspace
- workload objects
  - Some objects are denatured if needed.
  - Other objects are as it is
- APIExport/API Schema corresponding to CRD such as Kubernetes <a href="https://github.com/kubernetes-sigs/wg-policy-prototypes/blob/master/policy-report/crd/v1beta1/wgpolicyk8s.io_clusterpolicyreports.yaml">ClusterPolicyReport</a>.
  - TBD: Conversion from CRD to APIExport/APISchema could be automated by using MutatingAdmissionWebhook on workload management workspace. This automation is already available (see the script <a href="https://github.com/kubestellar/kubestellar/blob/main/hack/update-codegen-crds.sh#L57">here</a>). 
- EdgePlacement</p>
<p><img alt="kubestellar-syncer deploy" src="../images/kubestellar-syncer-deploy.png" /></p>
<p>After this, KubeStellar will put the following in the mailbox workspace.
- Workload objects (both denatured one and not-denatured one)
- SyncerConfig CR</p>
<p><strong>TODO</strong>: This is something we should clarify..e.g. which existing controller(s) in KubeStellar will cover, or just create a new controller to handle uncovered one. @MikeSpreitzer gave the following suggestions.
  - The placement translator will put the workload objects and syncer config into the mailbox workspaces.
  - The placement translator will create syncer config based on the EdgePlacement objects and what they match.
  - The mailbox controller will put API Binding into the mailbox workspace.</p>
<h3 id="edgesyncconfig-will-be-replaced-to-syncerconfig">EdgeSyncConfig (will be replaced to SyncerConfig)<a class="headerlink" href="#edgesyncconfig-will-be-replaced-to-syncerconfig" title="Permanent link">#</a></h3>
<ul>
<li>The example of EdgeSyncConfig CR is <a href="https://github.com/kubestellar/kubestellar/blob/main/pkg/syncer/scripts/edge-sync-config-for-kyverno-helm.yaml">here</a>. Its CRD is <a href="https://github.com/kubestellar/kubestellar/blob/main/config/crds/edge.kubestellar.io_edgesyncconfigs.yaml">here</a>.</li>
<li>The CR here is used from edge syncer. </li>
<li>The CR is placed at mb-ws to define</li>
<li>object selector</li>
<li>need of renaturing</li>
<li>need of returning reported states of downsynced objects</li>
<li>need of delete propagation for downsyncing</li>
<li>The CR is managed by KubeStellar (placement transformer).</li>
<li>At the initial implementation before KubeStellar side controller become ready, we assume SyncerConfig is on workload management workspace (WDS), and then which will be copied into mb-ws like other workload objects.</li>
<li>This should be changed to be generated according to EdgePlacement spec. </li>
<li>This CR is a placeholder for defining how KubeStellar-Syncer behaves, and will be extended/split/merged according to further design discussion.</li>
<li>One CR is initially created by the command for KubeStellar-Syncer enablement in mb-ws (<code>kubectl kubestellar syncer-gen &lt;name&gt;</code>)</li>
<li>The CR name is <code>&lt;name&gt;</code> and the contents are empty.</li>
<li>This name is registered in the bootstrap manifests for KubeStellar-Syncer install and KubeStellar-Syncer is told to watch the CR of this name.</li>
<li>Currently KubeStellar-Syncer watches all CRs in the workspace</li>
<li>KubeStellar-Syncer merges them and decides which resources are down/up synced based on the merged information. </li>
<li>This behavior may be changed to only watching the default CR once Placement Translator is to be the component that generates the CR from EdgePlacement: <a href="https://github.com/kubestellar/kubestellar/pull/284#pullrequestreview-1375667129">related issue</a></li>
</ul>
<h3 id="syncerconfig">SyncerConfig<a class="headerlink" href="#syncerconfig" title="Permanent link">#</a></h3>
<ul>
<li>The spec is defined in https://github.com/kubestellar/kubestellar/blob/main/pkg/apis/edge/v2alpha1/syncer-config.go</li>
<li><code>namespaceScope</code> field is for namespace scoped objects.<ul>
<li><code>namespaces</code> is field for which namespaces to be downsynced.</li>
<li><code>resources</code> is field for what resource's objects in the above namespaces are downsynced. All objects in the selected resource are downsynced.</li>
</ul>
</li>
<li><code>clusterScope</code> field is for cluster scoped objects<ul>
<li>It's an array of <code>apiVersion</code>, <code>group</code>, <code>resource</code>, and <code>objects</code>.</li>
<li><code>objects</code> can be specified by wildcard (<code>*</code>) meaning all objects.</li>
</ul>
</li>
<li><code>upsync</code> field is for upsynced objects including both namespace and cluster scoped objects.<ul>
<li>It's an array of <code>apiGroup</code>, <code>resources</code>, <code>namespaces</code>, and <code>names</code>.</li>
<li><code>apiGroup</code> is group.</li>
<li><code>resources</code> is an array of upsynced resource.</li>
<li><code>namespaces</code> is an array of namespace for namespace objects.</li>
<li><code>names</code> is an array of upsynced object name. Wildcard (<code>*</code>) is available.</li>
</ul>
</li>
<li>The example CR is https://github.com/kubestellar/kubestellar/blob/main/test/e2e/kubestellar-syncer/testdata/kyverno/syncer-config.yaml</li>
<li>The CR is used from KubeStellar-Syncer</li>
<li>The CR is placed in mb-ws to define</li>
<li>object selector</li>
<li>need of renaturing (May not scope in PoC2023q1)</li>
<li>need of returning reported states of downsynced objects (May not scope in PoC2023q1)</li>
<li>need of delete propagation for downsyncing (May not scope in PoC2023q1)</li>
<li>The CR is managed by KubeStellar (placement translator).</li>
<li>At the initial implementation before KubeStellar side controller become ready, we assume SyncerConfig is on workload management workspace (WDS), and then which will be copied into mb-ws like other workload objects.</li>
<li>This should be changed to be generated according to EdgePlacement spec. </li>
<li>This CR is a placeholder for defining how KubeStellar-Syncer behaves, and will be extended/split/merged according to further design discussion.</li>
<li>Currently KubeStellar-Syncer watches all CRs in the workspace</li>
<li>KubeStellar-Syncer merges them and decides which resources are down/up synced based on the merged information. </li>
</ul>
<h3 id="downsyncing">Downsyncing<a class="headerlink" href="#downsyncing" title="Permanent link">#</a></h3>
<ul>
<li>KubeStellar-Syncer does downsyncing, which copy workload objects on mailbox workspace to Edge cluster</li>
<li>If workload objects are deleted on mailbox workspace, the corresponding objects on the Edge cluster will be also deleted according to SyncerConfig. </li>
<li>SyncerConfig specifies which objects should be downsynced.</li>
<li>object selector: group, version, kind, name, namespace (for namespaced objects), label, annotation</li>
<li>Cover cluster-scope objects and CRD</li>
<li>CRD needs to be denatured if downsyncing is required. (May not scope in PoC2023q1 since no usage)</li>
<li>Renaturing is applied if required (specified in SyncerConfig). (May not scope in PoC2023q1 since no usage)</li>
<li>Current implementation is using polling to detect changes on mailbox workspace, but will be changed to use Informers. </li>
</ul>
<h3 id="renaturing-may-not-scope-in-poc2023q1-since-no-usage">Renaturing (May not scope in PoC2023q1 since no usage)<a class="headerlink" href="#renaturing-may-not-scope-in-poc2023q1-since-no-usage" title="Permanent link">#</a></h3>
<ul>
<li>KubeStellar-Syncer does renaturing, which converts workload objects to different forms of objects on a Edge cluster. </li>
<li>The conversion rules (downstream/upstream mapping) is specified in SyncerConfig.</li>
<li>Some objects need to be denatured. </li>
<li>CRD needs to be denatured when conflicting with APIBinding.</li>
</ul>
<h3 id="return-of-reported-state">Return of reported state<a class="headerlink" href="#return-of-reported-state" title="Permanent link">#</a></h3>
<ul>
<li>KubeStellar-Syncer return the reported state of downsynced objects at Edge cluster to the status of objects on the mailbox workspace periodically. </li>
<li>TODO: Failing to returning reported state of some resources (e.g. deployment and service). Need more investigation. </li>
<li>reported state returning on/off is configurable in SyncerConfig. (default is on)</li>
</ul>
<h3 id="resource-upsyncing">Resource Upsyncing<a class="headerlink" href="#resource-upsyncing" title="Permanent link">#</a></h3>
<ul>
<li>KubeStellar-Syncer does upsyncing resources at Edge cluster to the corresponding mailbox workspace periodically. </li>
<li>SyncerConfig specifies which objects should be upsynced from Edge cluster.</li>
<li>object selector: group, version, kind, name, namespace (for namespaced objects), label, annotation (, and more such as ownership reference?)</li>
<li>Upsyncing CRD is out of scope for now. This means when upsyncing a CR, corresponding APIBinding (not CRD) is available on the mailbox workspace. This limitation might be revisited later. </li>
<li>~Upsynced objects can be accessed from APIExport set on the workload management workspace bound to the mailbox workspace (with APIBinding). This access pattern might be changed when other APIs such as summarization are provided in KubeStellar.~ =&gt; Upsynced objects are accessed through Mailbox informer.</li>
</ul>
<h3 id="feasibility-study">Feasibility study<a class="headerlink" href="#feasibility-study" title="Permanent link">#</a></h3>
<p>We will verify if the design described here could cover the following 4 scenarios. 
- I can register a KubeStellar-Syncer on a Edge cluster to connect a mailbox workspace specified by name. (KubeStellar-Syncer registration)
- I can deploy Kyverno and its policy from mailbox workspace to Edge cluster just by using manifests (generated from Kyverno helm chart) rather than using OLM. (workload deployment by KubeStellar-Syncer's downsyncing)
- I can see the policy report generated at Edge cluster via API Export on workload management workspace. (resource upsyncing by KubeStellar-Syncer) 
- I can deploy the denatured objects on mailbox workspace to Edge cluster by renaturing them automatically in KubeStellar-Syncer. (workload deployment by renaturing)</p>
<h2 id="build-kubestellar-syncer-image">Build KubeStellar-Syncer image<a class="headerlink" href="#build-kubestellar-syncer-image" title="Permanent link">#</a></h2>
<p>Prerequisite
- Install ko (https://ko.build/install/)</p>
<h3 id="how-to-build-the-image-in-your-local">How to build the image in your local<a class="headerlink" href="#how-to-build-the-image-in-your-local" title="Permanent link">#</a></h3>
<ol>
<li><code>make build-kubestellar-syncer-image-local</code>
e.g.
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a>$ make build-kubestellar-syncer-image-local
<a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>2023/04/24 11:50:37 Using base distroless.dev/static:latest@sha256:81018475098138883b80dcc9c1242eb02b53465297724b18e88591a752d2a49c for github.com/kubestellar/kubestellar/cmd/syncer
<a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a>2023/04/24 11:50:38 Building github.com/kubestellar/kubestellar/cmd/syncer for linux/arm64
<a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a>2023/04/24 11:50:39 Loading ko.local/syncer-273dfcc28dbb16dfcde62c61d54e1ca9:c4759f6f841075649a22ff08bdf4afe32600f8bb31743d1aa553454e07375c96
<a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a>2023/04/24 11:50:40 Loaded ko.local/syncer-273dfcc28dbb16dfcde62c61d54e1ca9:c4759f6f841075649a22ff08bdf4afe32600f8bb31743d1aa553454e07375c96
<a id="__codelineno-127-6" name="__codelineno-127-6" href="#__codelineno-127-6"></a>2023/04/24 11:50:40 Adding tag latest
<a id="__codelineno-127-7" name="__codelineno-127-7" href="#__codelineno-127-7"></a>2023/04/24 11:50:40 Added tag latest
<a id="__codelineno-127-8" name="__codelineno-127-8" href="#__codelineno-127-8"></a>kubestellar-syncer image:
<a id="__codelineno-127-9" name="__codelineno-127-9" href="#__codelineno-127-9"></a>ko.local/syncer-273dfcc28dbb16dfcde62c61d54e1ca9:c4759f6f841075649a22ff08bdf4afe32600f8bb31743d1aa553454e07375c96
</code></pre></div>
<code>ko.local/syncer-273dfcc28dbb16dfcde62c61d54e1ca9:c4759f6f841075649a22ff08bdf4afe32600f8bb31743d1aa553454e07375c96</code> is the image stored in your local Docker registry.</li>
</ol>
<p>You can also set a shell variable to the output of this Make task.</p>
<p>For example
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>image=`make build-kubestellar-syncer-image-local`
</code></pre></div></p>
<h3 id="how-to-build-the-image-with-multiple-architectures-and-push-it-to-docker-registry">How to build the image with multiple architectures and push it to Docker registry<a class="headerlink" href="#how-to-build-the-image-with-multiple-architectures-and-push-it-to-docker-registry" title="Permanent link">#</a></h3>
<ol>
<li><code>make build-kubestellar-syncer-image</code></li>
</ol>
<p>The behavior can be modified with some make variables; their default values are what get used in a normal build.  The variables are as follows.</p>
<ul>
<li><code>DOCKER_REPO</code>, <code>IMAGE_TAG</code>: the built multi-platform manifest will
  be pushed to <code>$DOCKER_REPO:$IMAGE_TAG</code>.  The default for
  <code>DOCKER_REPO</code> is <code>quay.io/kubestellar/syncer</code>.  The default for
  <code>IMAGE_TAG</code> is the concatenation of: "git-", a short ID of the
  current git commit, "-", and either "clean" or "dirty" depending on
  what <code>git status</code> has to say about it. It is <strong>STRONGLY</strong> recommended to <strong>NOT</strong>
  override <code>IMAGE_TAG</code> <em>unless</em> the override <em>also</em> identifies the git commit
  and cleanliness, as this tag is the ONLY place that this is recorded (for the
  sake of reproducable builds, the <code>go build</code> command is told to <em>not</em> include
  git and time metadata). To <em>add</em> tags, use your container runtime's and/or
  image registry's additional functionality.</li>
<li><code>SYNCER_PLATFORMS</code>: a
  comma-separated list of <code>docker build</code> "platforms".  The default is
  "linux/amd64,linux/arm64,linux/s390x".</li>
<li><code>ADDITIONAL_ARGS</code>: a word that will be added into the <code>ko build</code> command line.
  The default is the empty string.</li>
</ul>
<p>For example,
<div class="language-text highlight"><pre><span></span><code><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a>$ make build-kubestellar-syncer-image DOCKER_REPO=quay.io/mspreitz/syncer SYNCER_PLATFORMS=linux/amd64,linux/arm64 
<a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a>2023/11/06 13:46:15 Using base cgr.dev/chainguard/static:latest@sha256:d3465871ccaba3d4aefe51d6bb2222195850f6734cbbb6ef0dd7a3da49826159 for github.com/kubestellar/kubestellar/cmd/syncer
<a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a>2023/11/06 13:46:16 Building github.com/kubestellar/kubestellar/cmd/syncer for linux/amd64
<a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a>2023/11/06 13:46:16 Building github.com/kubestellar/kubestellar/cmd/syncer for linux/arm64
<a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a>2023/11/06 13:46:43 Publishing quay.io/mspreitz/syncer:git-a4250b7ee-dirty
<a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a>2023/11/06 13:46:44 pushed blob: sha256:250c06f7c38e52dc77e5c7586c3e40280dc7ff9bb9007c396e06d96736cf8542
<a id="__codelineno-129-7" name="__codelineno-129-7" href="#__codelineno-129-7"></a>2023/11/06 13:46:44 pushed blob: sha256:24e67d450bd33966f28c92760ffcb5eae57e75f86ce1c0e0266a5d3c159d1798
<a id="__codelineno-129-8" name="__codelineno-129-8" href="#__codelineno-129-8"></a>2023/11/06 13:46:44 pushed blob: sha256:cd93f0a485889b13c1b34307d8dde4b989b45b7ebdd1f13a2084c89c87cb2fbf
<a id="__codelineno-129-9" name="__codelineno-129-9" href="#__codelineno-129-9"></a>2023/11/06 13:46:44 pushed blob: sha256:aa2769d82ae2f06035ceb26ce127c604bc0797f3e9a09bfc0dc010afff25d5c6
<a id="__codelineno-129-10" name="__codelineno-129-10" href="#__codelineno-129-10"></a>2023/11/06 13:46:44 pushed blob: sha256:9ac3b3732a57658f71e51d440eba76d27be0fac6db083c3e227585d5d7b0be94
<a id="__codelineno-129-11" name="__codelineno-129-11" href="#__codelineno-129-11"></a>2023/11/06 13:46:44 pushed blob: sha256:512f2474620de277e19ecc783e8e2399f54cb2669873db4b54159ac3c47a1914
<a id="__codelineno-129-12" name="__codelineno-129-12" href="#__codelineno-129-12"></a>2023/11/06 13:46:44 pushed blob: sha256:f2ae5118c0fadc41f16d463484970c698e9640de5d574b0fd29d4065e6d92795
<a id="__codelineno-129-13" name="__codelineno-129-13" href="#__codelineno-129-13"></a>2023/11/06 13:46:44 pushed blob: sha256:836fc9b0d92a362f818a04d483219a5254b4819044506b26d2a78c27a49d8421
<a id="__codelineno-129-14" name="__codelineno-129-14" href="#__codelineno-129-14"></a>2023/11/06 13:46:44 pushed blob: sha256:74256082c076ec34b147fa439ebdafffb10043cb418abe7531c49964cc2e9376
<a id="__codelineno-129-15" name="__codelineno-129-15" href="#__codelineno-129-15"></a>2023/11/06 13:46:44 quay.io/mspreitz/syncer:sha256-905d0fda05d7f9312c0af44856e9af5004ed6e2369f38b71469761cb3f9da2d1.sbom: digest: sha256:d40e5035236f888f8a1a784c4c630998dd92ee66c1b375bf379f1c915c4f296d size: 374
<a id="__codelineno-129-16" name="__codelineno-129-16" href="#__codelineno-129-16"></a>2023/11/06 13:46:44 Published SBOM quay.io/mspreitz/syncer:sha256-905d0fda05d7f9312c0af44856e9af5004ed6e2369f38b71469761cb3f9da2d1.sbom
<a id="__codelineno-129-17" name="__codelineno-129-17" href="#__codelineno-129-17"></a>2023/11/06 13:46:44 quay.io/mspreitz/syncer:sha256-18045f17222f9d0ec4fa3f736eaba891041d2980d1fb8c9f7f0a7a562172c9e5.sbom: digest: sha256:cad30541f2af79b74f87a37d284fa508fefd35cb130ee35745cfe31d85318fe9 size: 373
<a id="__codelineno-129-18" name="__codelineno-129-18" href="#__codelineno-129-18"></a>2023/11/06 13:46:44 Published SBOM quay.io/mspreitz/syncer:sha256-18045f17222f9d0ec4fa3f736eaba891041d2980d1fb8c9f7f0a7a562172c9e5.sbom
<a id="__codelineno-129-19" name="__codelineno-129-19" href="#__codelineno-129-19"></a>2023/11/06 13:46:44 quay.io/mspreitz/syncer:sha256-25d71940766653861e3175feec34fd2a6faff4f4c4f7bd55784f035a860d3be2.sbom: digest: sha256:877daabfb8593ce25c377446f9ec07782eb89b1ff15afdf9a2dfe882b7f87b06 size: 374
<a id="__codelineno-129-20" name="__codelineno-129-20" href="#__codelineno-129-20"></a>2023/11/06 13:46:44 Published SBOM quay.io/mspreitz/syncer:sha256-25d71940766653861e3175feec34fd2a6faff4f4c4f7bd55784f035a860d3be2.sbom
<a id="__codelineno-129-21" name="__codelineno-129-21" href="#__codelineno-129-21"></a>2023/11/06 13:46:45 pushed blob: sha256:0757eb0b6bd5eb800545762141ea55fae14a3f421aa84ac0414bbf51ffd95509
<a id="__codelineno-129-22" name="__codelineno-129-22" href="#__codelineno-129-22"></a>2023/11/06 13:46:45 pushed blob: sha256:9b50f69553a78acc0412f1fba1e27553f47a0f1cc76acafaad983320fb4d2edd
<a id="__codelineno-129-23" name="__codelineno-129-23" href="#__codelineno-129-23"></a>2023/11/06 13:46:54 pushed blob: sha256:15df213e4830817c1a38d97fda67c3e8459c17bc955dc36ac7f2fbdea26a12d4
<a id="__codelineno-129-24" name="__codelineno-129-24" href="#__codelineno-129-24"></a>2023/11/06 13:46:54 quay.io/mspreitz/syncer@sha256:905d0fda05d7f9312c0af44856e9af5004ed6e2369f38b71469761cb3f9da2d1: digest: sha256:905d0fda05d7f9312c0af44856e9af5004ed6e2369f38b71469761cb3f9da2d1 size: 1211
<a id="__codelineno-129-25" name="__codelineno-129-25" href="#__codelineno-129-25"></a>2023/11/06 13:46:54 pushed blob: sha256:6144db4c37348e2bdba9e850652e46f260dbab377e4f62d29bcdb84fcceaca00
<a id="__codelineno-129-26" name="__codelineno-129-26" href="#__codelineno-129-26"></a>2023/11/06 13:46:55 quay.io/mspreitz/syncer@sha256:25d71940766653861e3175feec34fd2a6faff4f4c4f7bd55784f035a860d3be2: digest: sha256:25d71940766653861e3175feec34fd2a6faff4f4c4f7bd55784f035a860d3be2 size: 1211
<a id="__codelineno-129-27" name="__codelineno-129-27" href="#__codelineno-129-27"></a>2023/11/06 13:46:55 quay.io/mspreitz/syncer:git-a4250b7ee-dirty: digest: sha256:18045f17222f9d0ec4fa3f736eaba891041d2980d1fb8c9f7f0a7a562172c9e5 size: 986
<a id="__codelineno-129-28" name="__codelineno-129-28" href="#__codelineno-129-28"></a>2023/11/06 13:46:55 Published quay.io/mspreitz/syncer:git-a4250b7ee-dirty@sha256:18045f17222f9d0ec4fa3f736eaba891041d2980d1fb8c9f7f0a7a562172c9e5
<a id="__codelineno-129-29" name="__codelineno-129-29" href="#__codelineno-129-29"></a>echo KO_DOCKER_REPO=quay.io/mspreitz/syncer GOFLAGS=-buildvcs=false ko build --platform=linux/amd64,linux/arm64 --bare --tags git-a4250b7ee-dirty  ./cmd/syncer
<a id="__codelineno-129-30" name="__codelineno-129-30" href="#__codelineno-129-30"></a>KO_DOCKER_REPO=quay.io/mspreitz/syncer GOFLAGS=-buildvcs=false ko build --platform=linux/amd64,linux/arm64 --bare --tags git-a4250b7ee-dirty ./cmd/syncer
<a id="__codelineno-129-31" name="__codelineno-129-31" href="#__codelineno-129-31"></a>quay.io/mspreitz/syncer:git-a4250b7ee-dirty@sha256:18045f17222f9d0ec4fa3f736eaba891041d2980d1fb8c9f7f0a7a562172c9e5
</code></pre></div></p>
<p>The last line of the output shows the full image reference, including both tag and digest of the "image" (technically it is a multi-platform manifest).</p>
<h2 id="teardown-the-environment_1">Teardown the environment<a class="headerlink" href="#teardown-the-environment_1" title="Permanent link">#</a></h2>
<!-- BEGIN INCLUDE ../../common-subs/teardown-the-environment.md '&lt;!--teardown-the-environment-start--&gt;' '&lt;!--teardown-the-environment-end--&gt;' -->

<p>To remove the example usage, delete the IMW and WMW and kind clusters run the following commands:</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>rm<span class="w"> </span>florin-syncer.yaml<span class="w"> </span>guilder-syncer.yaml<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">true</span>
<a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a>kubectl<span class="w"> </span>ws<span class="w"> </span>root
<a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a>kind<span class="w"> </span>delete<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>florin
<a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a>kind<span class="w"> </span>delete<span class="w"> </span>cluster<span class="w"> </span>--name<span class="w"> </span>guilder
</code></pre></div>
<p>Teardown of KubeStellar depends on which style of deployment was used.</p>
<h3 id="teardown-bare-processes_1">Teardown bare processes<a class="headerlink" href="#teardown-bare-processes_1" title="Permanent link">#</a></h3>
<p>The following command will stop whatever KubeStellar controllers are running.</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>kubestellar<span class="w"> </span>stop
</code></pre></div>
<p>Stop and uninstall KubeStellar and the space provider with the following command:</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>remove-kubestellar
</code></pre></div>
<h3 id="teardown-kubernetes-workload_1">Teardown Kubernetes workload<a class="headerlink" href="#teardown-kubernetes-workload_1" title="Permanent link">#</a></h3>
<p>With <code>kubectl</code> configured to manipulate the hosting cluster, the following command will remove the workload that is the space provider and KubeStellar.</p>
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>helm<span class="w"> </span>delete<span class="w"> </span>kubestellar
</code></pre></div>
<!-- END INCLUDE -->


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/kubestellar/kubestellar/issues/new?assignees=&labels=kind%2Fbug&projects=&template=bug_report.yaml&title=bug%3A+" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../coding-milestone-invite-q1/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Invitation to Contribute" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
                Invitation to Contribute
              </div>
            </div>
          </a>
        
        
          
          <a href="../example1/" class="md-footer__link md-footer__link--next" aria-label="Next: Extended Example" rel="next">
            <div class="md-footer__title">
              <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
                Extended Example
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.action.edit", "content.action.view", "navigation.indexes", "navigation.tabs", "navigation.path", "navigation.footer", "content.code.copy", "content.code.annotate"], "search": "../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.ce72ebac.min.js"></script>
      
        <script src="../../../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>